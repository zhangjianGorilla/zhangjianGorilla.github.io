<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>计算机网络 | 个人文档</title><meta name="author" content="Zhang Jian"><meta name="copyright" content="Zhang Jian"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="计算机网络体系结构概念、组成、功能和分类计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。 计算机网络是互联、自治的计算机集合。  互联：互通互联——通信链路 自治：无主从关系  功能 数据通信 资源共享（硬件、软件、数据） 分布式处理  多台计算机各自承担同一工作任务的不同部分 提高靠靠性 负载均衡  组成 组成部分分">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络">
<meta property="og:url" content="http://example.com/2022/07/13/computer/index.html">
<meta property="og:site_name" content="个人文档">
<meta property="og:description" content="计算机网络体系结构概念、组成、功能和分类计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。 计算机网络是互联、自治的计算机集合。  互联：互通互联——通信链路 自治：无主从关系  功能 数据通信 资源共享（硬件、软件、数据） 分布式处理  多台计算机各自承担同一工作任务的不同部分 提高靠靠性 负载均衡  组成 组成部分分">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/cover.jpeg">
<meta property="article:published_time" content="2022-07-13T07:44:00.000Z">
<meta property="article:modified_time" content="2022-12-14T03:30:08.716Z">
<meta property="article:author" content="Zhang Jian">
<meta property="article:tag" content="计算机">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/cover.jpeg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/07/13/computer/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-12-14 11:30:08'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">个人文档</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-13T07:44:00.000Z" title="发表于 2022-07-13 15:44:00">2022-07-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-14T03:30:08.716Z" title="更新于 2022-12-14 11:30:08">2022-12-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">23.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>72分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="计算机网络体系结构"><a href="#计算机网络体系结构" class="headerlink" title="计算机网络体系结构"></a>计算机网络体系结构</h2><h3 id="概念、组成、功能和分类"><a href="#概念、组成、功能和分类" class="headerlink" title="概念、组成、功能和分类"></a>概念、组成、功能和分类</h3><p>计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。</p>
<p>计算机网络是互联、自治的计算机集合。</p>
<ul>
<li>互联：互通互联——通信链路</li>
<li>自治：无主从关系</li>
</ul>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ul>
<li>数据通信</li>
<li>资源共享（硬件、软件、数据）</li>
<li>分布式处理  多台计算机各自承担同一工作任务的不同部分</li>
<li>提高靠靠性</li>
<li>负载均衡</li>
</ul>
<h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><ul>
<li>组成部分分为软件、硬件和协议</li>
<li>工作方式包括边缘部分和核心部分。边缘部分从用户使用角度又可分为C&#x2F;S方式和P2P方式。核心部分为边缘部分提供服务。</li>
<li>功能组成包括通信子网和资源子网。通信子网实现数据通信，包括物理层、数据链路层和网络层。资源子网实现资源共享、数据处理等，包含会话层、表示层和应用层。</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li>按分布范围可分为：广域网WAN、城域网MAN、局域网WAN和个人区域网PAN。</li>
<li>按使用者可分为：公用网和专用网。</li>
<li>按交换技术可分为：电路交换、报文交换和分组交换。</li>
<li>按拓扑结构可分为：总线型、星型、环形和网状型。</li>
<li>按传输技术可分为：广播式网络(共享公共通信信道)和点对点网络(使用分组存储转发和路由选择机制)。</li>
</ul>
<h3 id="标准化工组及相关组织"><a href="#标准化工组及相关组织" class="headerlink" title="标准化工组及相关组织"></a>标准化工组及相关组织</h3><blockquote>
<p>要实现不同厂商的硬、软件之间相互连通，必须遵从统一的标准。</p>
</blockquote>
<h4 id="标准的分类"><a href="#标准的分类" class="headerlink" title="标准的分类"></a>标准的分类</h4><ul>
<li>法定标准：由权威机构制定的正式的、合法的标准。eg: OSI</li>
<li>事实标准：某些公司的产品在竞争中占据了主流，时间长了，这些产品中的协议和技术就成了标准。eg:TCP&#x2F;IP</li>
</ul>
<h4 id="RFC（Request-For-Comments）因特网标准的形式"><a href="#RFC（Request-For-Comments）因特网标准的形式" class="headerlink" title="RFC（Request For Comments）因特网标准的形式"></a>RFC（Request For Comments）因特网标准的形式</h4><p>RFC要上升为因特网正式标准的四个阶段：</p>
<ol>
<li>因特网草案（Internet Draft）这个阶段还不是RFC文档。</li>
<li>建议标准（Proposed Standard）从这个阶段开始成为RFC文档。</li>
<li>草案标准（Draft Standard）IEFT、IAB</li>
<li>因特网标准（Internet Standard)</li>
</ol>
<h4 id="相关组织"><a href="#相关组织" class="headerlink" title="相关组织"></a>相关组织</h4><ul>
<li>国际标准化组织ISO：OSI参考模型、HDLC协议</li>
<li>国际电信联盟ITU：置顶通信规则</li>
<li>国际电气电子工程师协会IEEE：学术机构、IEEE802系列标准、5G</li>
<li>Internet工程师任务组IETF：负责因特网相关标准的制定</li>
</ul>
<h3 id="速率相关的性能指标"><a href="#速率相关的性能指标" class="headerlink" title="速率相关的性能指标"></a>速率相关的性能指标</h3><blockquote>
<p>速率即数据率或称数据传输率或比特率。也可以表示连接在计算机网络上的主机在数字信道上传送数据位数的速率。</p>
</blockquote>
<h4 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h4><p>单位是b&#x2F;s, kb&#x2F;s, Mb&#x2F;s, Gb&#x2F;s, Tb&#x2F;s</p>
<table>
<thead>
<tr>
<th>单位</th>
<th align="center">速率</th>
<th align="center">存储容量</th>
</tr>
</thead>
<tbody><tr>
<td>千</td>
<td align="center">1 kb&#x2F;s&#x3D;10^3 b&#x2F;s</td>
<td align="center">1 KB&#x3D;2^10 B&#x3D;1024 * 8 b</td>
</tr>
<tr>
<td>兆</td>
<td align="center">1 Mb&#x2F;s&#x3D;10^3 kb&#x2F;s&#x3D;10^6 b&#x2F;s</td>
<td align="center">1 MB&#x3D;2^10 KB&#x3D;1024 KB</td>
</tr>
<tr>
<td>吉</td>
<td align="center">1 Gb&#x2F;s&#x3D;10^3 Mb&#x2F;s&#x3D;10^6 Kb&#x2F;s&#x3D;10^ 9 b&#x2F;s</td>
<td align="center">1 GB&#x3D;2^10 MB&#x3D;1024 MB</td>
</tr>
<tr>
<td>太</td>
<td align="center">1 Tb&#x2F;s&#x3D;10^ Gb&#x2F;s&#x3D;10^6 Mb&#x2F;s&#x3D;10^9 Kb&#x2F;s&#x3D;10^12 b&#x2F;s</td>
<td align="center">1 TB&#x3D;2^10 GB&#x3D;1024 GB</td>
</tr>
</tbody></table>
<blockquote>
<p>ps: 1 Byte(字节)&#x3D;8bit(比特)</p>
</blockquote>
<h4 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h4><p>原本指某个信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹 Hz。</p>
<p>在计算机网络中，带宽用来表示网络的通信线路传送数据的能力，通常是指单位时间从网络中的某一点到令一点所能通过的最高数据率。单位是比特每秒，b&#x2F;s，kb&#x2F;s，Mb&#x2F;s，Tb&#x2F;s。即网络设备所支持的最高速率。</p>
<h4 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>表示在单位时间内通过某个网络(或信道、接口)的数据量，单位b&#x2F;s，kb&#x2F;s，Mb&#x2F;s。</p>
<p>吞吐量受网络的带宽或网络的额定速率的限制。</p>
<h3 id="时延、时延带宽积、RTT和利用率"><a href="#时延、时延带宽积、RTT和利用率" class="headerlink" title="时延、时延带宽积、RTT和利用率"></a>时延、时延带宽积、RTT和利用率</h3><h4 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h4><p>指数据（包围&#x2F;分组&#x2F;比特流）从网络（或链路）的一段传送到另一端所需的时间。也叫延迟或迟延。单位是s。</p>
<p><strong>发送时延</strong></p>
<ul>
<li>从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间。</li>
<li>发送时延&#x3D;数据长度&#x2F;信道带宽(发送速度)</li>
</ul>
<p><strong>传播时延</strong></p>
<ul>
<li>取决于电磁波传播速度和链路长度</li>
<li>传播时延&#x3D;信道长度&#x2F;电磁波在信道上的传播速率</li>
</ul>
<p><strong>排队时延</strong></p>
<ul>
<li>等待输出&#x2F;入链路可用</li>
</ul>
<p><strong>处理时延</strong></p>
<ul>
<li>检错找出口</li>
</ul>
<h4 id="时延带宽积"><a href="#时延带宽积" class="headerlink" title="时延带宽积"></a>时延带宽积</h4><p>时延带宽积又称为以比特为单位的链路长度，即某段链路现在有多少比特。<br>时延带宽积(bit)&#x3D;传播时延(s)*带宽(b&#x2F;s)</p>
<h4 id="往返时间RTT"><a href="#往返时间RTT" class="headerlink" title="往返时间RTT"></a>往返时间RTT</h4><p>从发送发发送数据开始，到发送发接收到接收方的确认，总共经历的时延。</p>
<p>RTT越大，在收到确认之前，可以发送的数据越多。</p>
<p>RTT包括往返传播时延(传播时延*2)和末端处理时间。</p>
<h4 id="利用率"><a href="#利用率" class="headerlink" title="利用率"></a>利用率</h4><p>利用率包括信道利用率和网络利用率。信道利用率&#x3D;有数据通过时间&#x2F;(有+无)数据通过时间。网络利用率等于信道利用率的加权平均值。</p>
<h3 id="分层结构、协议、接口和服务"><a href="#分层结构、协议、接口和服务" class="headerlink" title="分层结构、协议、接口和服务"></a>分层结构、协议、接口和服务</h3><h4 id="分层的基本原则"><a href="#分层的基本原则" class="headerlink" title="分层的基本原则"></a>分层的基本原则</h4><ul>
<li>各层之间相互独立，每层只实现一种相对独立的功能。</li>
<li>各层之间的界面自然清晰，易于理解，相互交流尽可能少。</li>
<li>结构上可分割开。每层都采用最合适的技术来实现。</li>
<li>保持下层对上层的独立性，上层单项使用下层提供的服务。</li>
<li>整个分层结构应该能促进标准化工作。</li>
</ul>
<h4 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h4><p>第n层中的活动元素称为n层实体。同一层的实体叫做对等实体。</p>
<h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><p>为进行网络中的对等实体数据交换而建立的规则、标准或约定称为网络协议【水平方向】</p>
<p>语法：规定传输数据的格式</p>
<p>语义：规定所要完成的功能</p>
<p>同步：规定各种操作的顺序</p>
<h4 id="接口-访问服务点ASP"><a href="#接口-访问服务点ASP" class="headerlink" title="接口(访问服务点ASP)"></a>接口(访问服务点ASP)</h4><p>上层使用下层服务的入口</p>
<h4 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h4><p>下层为相邻上层提供的功能调用。【垂直方向】</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/p1.png"></p>
<p>SDU服务数据单元：未完成用户所要求的共功能而应传送的数据。</p>
<p>PCI协议控制信息：控制协议操作的信息。</p>
<p>PDU协议数据单元：对等层质传送的数据单元。</p>
<h3 id="OSI七层参考模型"><a href="#OSI七层参考模型" class="headerlink" title="OSI七层参考模型"></a>OSI七层参考模型</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/osi.png" alt="OSI 七层参考模型"></p>
<h4 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h4><p>所有能和用户交互产生网络流量的程序。</p>
<h4 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h4><p>用于处理在两个通信系统中交换信息的表示方式。</p>
<p>功能：</p>
<ul>
<li>数据格式变换——翻译官</li>
<li>数据加密解密——密码加密</li>
<li>数据压缩和恢复——图片压缩</li>
</ul>
<h4 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h4><p>向表示实体&#x2F;用户进程提供建立连接并在连接上有序地传送数据——建立同同步会话。</p>
<p>功能：</p>
<ul>
<li>建立、管理和终止会话。</li>
<li>使用校验点可使会话在通信失效时从校验点或同步点继续回复通信，实现数据同步。</li>
</ul>
<p>主要协议：ADS、SAP</p>
<h4 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h4><p>负责主机中两个进程的通信。即端到端的通信。单位：报文段或用户数据报。</p>
<p>功能：</p>
<ul>
<li>可靠传输、不可靠传输</li>
<li>差错控制</li>
<li>流量控制</li>
<li>复用分用</li>
</ul>
<p>主要协议：TCP&#x2F;IP</p>
<h4 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h4><p>把分组从源端缠讼到目的端，为分组交换网上的不同主机提供通信服务。单位：数据报。</p>
<p>功能：</p>
<ul>
<li>路由选择，最佳路径</li>
<li>流量控制</li>
<li>差错控制</li>
<li>拥塞控制</li>
</ul>
<p>主要协议：IP、IPX、ICMP、IGMP、ARP</p>
<h4 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h4><p>把网络层传下来的数据报组装成帧。单位：帧</p>
<p>功能：</p>
<ul>
<li>成帧（定义帧的开始和结束）</li>
<li>差错控制：帧错或位错</li>
<li>流量控制</li>
<li>访问控制，控制对信道的访问</li>
</ul>
<p>主要协议：SDLC、HDLC、PPP、STP</p>
<h4 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h4><p>在屋里媒体上实现比特流的透明传输——不管所传输数据是什么样的比特组合，都应当能狗在链路上传输。</p>
<p>功能：</p>
<ul>
<li>定义接口特性</li>
<li>定义传输模式。单工、半双工、双工</li>
<li>比特同步</li>
<li>比特编码</li>
</ul>
<p>主要协议：Rj45、802.5</p>
<h3 id="TCP-x2F-IP参考模型和5层参考模型"><a href="#TCP-x2F-IP参考模型和5层参考模型" class="headerlink" title="TCP&#x2F;IP参考模型和5层参考模型"></a>TCP&#x2F;IP参考模型和5层参考模型</h3><p>OSI参考 模型与TCP&#x2F;IP参考模型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/tcp.png" alt="TCP/IP 四层参考模型"></p>
<p>相同点：</p>
<ol>
<li>都分层</li>
<li>基于独立的协议栈的概念</li>
<li>可以实现异构网络互联</li>
</ol>
<p>不同点：</p>
<ol>
<li>OSI定义三点：服务、协议、接口</li>
<li>OSI先出现，参考模型限于协议发明，不偏向特定协议</li>
<li>TCP&#x2F;IP设计之初就考虑到异构网互联问题，将IP作为重要层次</li>
<li><table>
<thead>
<tr>
<th></th>
<th align="center">ISO&#x2F;OSI参考模型</th>
<th align="center">TCP&#x2F;IP模型</th>
</tr>
</thead>
<tbody><tr>
<td>网络层</td>
<td align="center">无连接+面向连接</td>
<td align="center">无连接</td>
</tr>
<tr>
<td>传输层</td>
<td align="center">面向连接</td>
<td align="center">无连接+面向连接</td>
</tr>
</tbody></table>
</li>
</ol>
<p>ps：面向连接：分为三个阶段，第一是建立连接，在此阶段，发出一个建立连接的请求。只有在连接成功建立之后，才能开始数据传输，这是第二阶段。接着，当数据传输完毕，必须释放连接。而面向无连接没有这么多阶段，它直接进行数据传输。</p>
<p>五层参考模型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/5floor.png" alt="五层参考模型"></p>
<p>五层参考模型的数据封装与解封装</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/p2.png" alt="五层参考模型的数据封装与解封装"></p>
<h2 id="物理层-1"><a href="#物理层-1" class="headerlink" title="物理层"></a>物理层</h2><h3 id="物理层基础"><a href="#物理层基础" class="headerlink" title="物理层基础"></a>物理层基础</h3><h4 id="数据通信基础知识"><a href="#数据通信基础知识" class="headerlink" title="数据通信基础知识"></a>数据通信基础知识</h4><blockquote>
<p>物理层解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。 </p>
</blockquote>
<p><strong>物理层主要任务</strong>：确定与传输媒体接口有关的一些特性——定义标准。</p>
<ol>
<li>机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、引线数目、引脚数量和排列情况。</li>
<li>电气特性：规定传输二进制位时，线路上信号的电眼范围、阻抗匹配、传输速率和距离限制等。</li>
<li>功能特性：指明某条线上出现的某一电平表示何种意义，接口部件的信号线的用途。</li>
<li>规程特性：定义各条物理线路的工作规程和时序关系。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B.png" alt="典型数据通信模型"></p>
<p><strong>数据通信相关术语</strong></p>
<p>通信的目的是传递消息。</p>
<p><strong>数据</strong>：传送信息的实体，通常是有意义的符号序列。</p>
<p><strong>信号</strong>：数据的电器&#x2F;电磁的表现，是数据在传输过程中的存在形式。数字信号：代表消息的参数取值是离散的。模拟信号：代表消息的参数取值是连续的。</p>
<p><strong>信源</strong>：产生和发送数据的源头。</p>
<p><strong>信宿</strong>：接收数据的终点。</p>
<p><strong>信道</strong>：信号的传输媒介，一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。<br>信道按传输信号可分为传送模拟信号的模拟信道和传送数字信号的数字信道。按传输介质可分为无线信道和有线信道。</p>
<p><strong>三种通信方式</strong></p>
<p>从通信双发信息的交互方式看，可以有三种基本方式：</p>
<ol>
<li>单工通信：只有一个方向的通信而没有反方向的交互，仅需要一条信道。</li>
<li>半双工通信：通信的双方都可以发送或接受信息，但任何一方都不能同时发送和接收，需要两条信道。</li>
<li>全双工通信：通信双方可以同时发送和接收信息，也需要两条信道。</li>
</ol>
<p><strong>两种数据传输方式</strong></p>
<p>串行传输：速度慢，费用低，适合远距离</p>
<p>并行传输：速度快，费用高，适合近距离（常用语计算机内部数据传输）</p>
<h4 id="码元、波特、速率、带宽"><a href="#码元、波特、速率、带宽" class="headerlink" title="码元、波特、速率、带宽"></a>码元、波特、速率、带宽</h4><p><strong>码元</strong>是指一个固定时长的信号波形(数字脉冲)，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为K进制码元，而该时长称为码元宽度。当码元的离散状态有M个时(M大于2)，此时码元为M进制码元。<br><strong>1码元可以携带多个比特的信息量</strong>。例如，在使用二进制编码时，只有两种不同的码元，一种代表0状态，另一种代表1状态。</p>
<p><strong>速率</strong>也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量。可以用<strong>码元传输速率</strong>和<strong>信息传输速率</strong>表示。</p>
<ol>
<li>码元传输速率：别名码元速率、波形速率、调制速率、符号速率等，他表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化的次数），<br>单位是<strong>波特（Baud）</strong>。1波特表述数字通信系统每秒传输一个码元。这里的码元可以是多进制的，也可以是二进制的，但码元速率与进制数无关。（1s传输多少个码元）</li>
<li>信息传输速率：别名信息速率、比特率等，表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特&#x2F;秒（b&#x2F;s）。(1s传输 多少个比特)</li>
</ol>
<p>关系：若一个码元携带n bit的信息量，则M Baud的码元传输速率多对应的信息传输速率为M*n bit&#x2F;s。</p>
<p><strong>带宽</strong>表示在单位时间内从网络中的某一点到另一点所能通过的<strong>最高数据率</strong>，通常用来表示网络的通信线路所能传输数据的能力。单位是b&#x2F;s。</p>
<p><strong>习题：</strong></p>
<p>某一数字通信系统传输的是四进制码元，4s传输了8000个码元，求系统的码元传输速率是多少？信息传输速率是多少？若另一个通信系统传输的是十六进制码元，6s传输了7200个码元，<br>求它的码元传输速率是多少？信息传输速率是多少？并指出那个系统传输速率快？</p>
<p><strong>解：</strong></p>
<p>四进制码元系统：</p>
<p>码元传输速率：8000&#x2F;4&#x3D;2000 Baud，信息传输速率：2000*log(2)4&#x3D;4000 b&#x2F;s</p>
<p>十六进制码元系统：</p>
<p>码元传输速率：7200&#x2F;6&#x3D;1200 Baud，信息传输速率：1200*log(2)16&#x3D;4800 b&#x2F;s</p>
<p>因为系统传输的是比特流，通常比较信息传输速率，所以十六进制系统下传输速率更快。同时，如果用该系统去传输四进制码元，会有更高的码元传输速率。</p>
<h4 id="奈氏准则和香农定理"><a href="#奈氏准则和香农定理" class="headerlink" title="奈氏准则和香农定理"></a>奈氏准则和香农定理</h4><p>奈氏准则：在理想低通（无噪声，带宽受限）天渐狭，为了避免马健串扰，极限码元传输速率2W Baud，W是信道带宽，单位是Hz。</p>
<p>理想低通信道下的极限数据传输率&#x3D;2Wlog(2)V b&#x2F;s</p>
<blockquote>
<p>W 为带宽（Hz），V 为集中码元&#x2F;码元的离散电平数目</p>
</blockquote>
<ol>
<li>在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对码元的完全正确识别成为不可能。</li>
<li>信道的频率越宽（即能通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输。</li>
<li>奈氏准则给出了码元传输速率的限制，但没有对信息传输速率给出限制。</li>
<li>由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特信息量，这就需要采用多元制的调制方法。</li>
</ol>
<p>香农定理：在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值。</p>
<p>信道的极限数据传输速率&#x3D;Wlog(2)(1+S&#x2F;N) b&#x2F;s</p>
<blockquote>
<p>W 带宽Hz，S&#x2F;N 信噪比，S是信道所传信号的平均功率，N是信道内的高斯噪声功率。</p>
</blockquote>
<h3 id="物理层设备"><a href="#物理层设备" class="headerlink" title="物理层设备"></a>物理层设备</h3><h4 id="中继器"><a href="#中继器" class="headerlink" title="中继器"></a>中继器</h4><p>对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络的功能。</p>
<p>中继器的两端：</p>
<p>两端的网络部分是网段，而不是子网，适用于完全相同的两类网络的互联，且两个网段速率要相同。</p>
<p>中继器只将任何电缆段上的数据发送到另一段电缆上，它仅作用于信号的电气部分，并不管数据中是否有错误数据或不适合于网段的数据。</p>
<p>两端可连相同媒体，也可连不同媒体。</p>
<p>中继器两端的网段一定要是同一个协议。</p>
<h4 id="集线器"><a href="#集线器" class="headerlink" title="集线器"></a>集线器</h4><p>对信号进行再生放大转发，对衰减的信号进行放大，接着转发到其它所有(除输入端口外)处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。不具备信号的定向传送能力，是一个共享式设备。</p>
<h2 id="数据链路层-1"><a href="#数据链路层-1" class="headerlink" title="数据链路层"></a>数据链路层</h2><h3 id="数据链路层功能概述"><a href="#数据链路层功能概述" class="headerlink" title="数据链路层功能概述"></a>数据链路层功能概述</h3><p><strong>结点</strong>：主机、路由器</p>
<p><strong>链路</strong>：网路中两个结点之间的物理通道 ，链路的传输介质主要有双绞线、光纤和微波。分为有线链路、无限链路。</p>
<p><strong>数据链路</strong>：网络中两个结点之间的逻辑通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。</p>
<p><strong>帧</strong>：链路层的协议数据单元，封装网络层数据报。</p>
<blockquote>
<p>数据链路层在物理层提供服务的基础上想网络层提供服务，其最基本的服务是将源自网络层来的数据可靠的传输到相邻结点的目标机网络层。<br>其主要作用是<strong>加强物理层传输原始化比特流的功能</strong>，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路。</p>
</blockquote>
<p>功能:</p>
<ol>
<li>为网络层提供服务。(无确认无连接服务，有确认无连接服务，有确认面向连接服务。)</li>
<li>链路管理，即连接的建立、维持、释放。（用于面向连接的服务）</li>
<li>组帧</li>
<li>流量控制。限制发送发</li>
<li>差错控制（帧错&#x2F;位错）。</li>
</ol>
<h3 id="封装成帧和透明传输"><a href="#封装成帧和透明传输" class="headerlink" title="封装成帧和透明传输"></a>封装成帧和透明传输</h3><p><strong>封装成帧</strong>就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，<br>从收到的比特流中识别帧的开始和结束。</p>
<p>首部和尾部包含许多的控制信息，他们的一个重要作用：<strong>帧定界</strong>（确定帧的界限）</p>
<p>帧同步：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。</p>
<p>组帧的四种方法： 1.字符计数法; 2.字符(节)填充法；3.零比特填充法；4.违规编码法。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.png" alt="组装成帧"></p>
<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><blockquote>
<p>指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就”看不见”有什么妨碍<br>数据传输的东西。当所传数据中的比特组合恰巧与某一个控制信息完全一样时，就必须采取适当的措施，<br>使接收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。</p>
</blockquote>
<p><strong>字符计数法</strong></p>
<p>帧首部使用一个计数字段（第一个字节，八位）来标明帧内字符数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%AD%97%E7%AC%A6%E8%AE%A1%E6%95%B0%E6%B3%95.png" alt="字符计数法"></p>
<p>缺点：如果第一个字节出错，将导致后续所有帧全部出错，发送和接收方的数据就会混乱。</p>
<p><strong>字符填充法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%AD%97%E7%AC%A6%E5%A1%AB%E5%85%85%E6%B3%95.png" alt="字符填充法"></p>
<p>如果在传输的每帧里面的原始数据里面存在和帧头或者帧尾相同的比特流时，接收法就会错误的处理数据。<br>所以在原始数据中出现帧头或帧尾的地方前面填充字符（遇到和填充字符相同的地方也需要在前面填充字节），<br>告诉接收方，接收时不需要管后面的内容，直到遇到真正的帧尾为止。</p>
<p><strong>零比特填充法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E6%B3%95.png" alt="零比特填充法"></p>
<p>操作：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E6%B3%951.png"></p>
<ol>
<li>在发送端，扫描整个信息字段，只要连续5个1，就立即填入1个0。</li>
<li>再接收端收到一个帧时，先找到标志字段确定边界，在用硬件对比特流进行扫描。发现5个连续1时，删除后面的0。</li>
</ol>
<p><strong>优点：保证了透明传输，在传送的比特流中可以传送任意比特组合，而不会引起对帧边界的判断错误。</strong></p>
<p><strong>违规编码法</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E8%BF%9D%E8%A7%84%E7%BC%96%E7%A0%81%E6%B3%95.png" alt="违规编码法"></p>
<p>曼彻斯特编码中可以用高-低电平表示1，用低-高电平表示0，所以在传输数据时，源数据不会出现高-高或低-低电平。<br>可以用”高-高”，”低-低”来定界帧的起始和终止。</p>
<blockquote>
<p>由于字节计数法中Count字段的脆弱性（其值若有差错将导致灾难性的后果）及字符填充法实现上的复杂性和不兼容性，<br>目前较普遍使用的帧同步法是<strong>零比特填充</strong>和<strong>违规编码法</strong>。</p>
</blockquote>
<h3 id="差错控制（检错编码、纠错编码）"><a href="#差错控制（检错编码、纠错编码）" class="headerlink" title="差错控制（检错编码、纠错编码）"></a>差错控制（检错编码、纠错编码）</h3><h4 id="检错编码——奇偶检验码"><a href="#检错编码——奇偶检验码" class="headerlink" title="检错编码——奇偶检验码"></a>检错编码——奇偶检验码</h4><blockquote>
<p>奇偶校验码包含n-1为信息元和1位校验元。如果是奇校验：信息元+校验元中1的个数为奇数个，<br>如果是偶校验：信息元+校验元中1的个数是偶数个。</p>
</blockquote>
<p>奇偶校验码特点：</p>
<p>只能检查出奇数个比特错误，交错能力为50%。</p>
<p>当数据中有偶数个位发生0-1的置换，就不能检查出来。</p>
<h4 id="检错编码——CRC循环冗余码"><a href="#检错编码——CRC循环冗余码" class="headerlink" title="检错编码——CRC循环冗余码"></a>检错编码——CRC循环冗余码</h4><p>采用CRC循环冗余码时，最终发送的数据为源数据+帧校验序列FCS(冗余码)</p>
<p>冗余码的计算：</p>
<ol>
<li>加0。假设生成多项式G(x)的阶为r，则加r个0。</li>
<li>模2除法。数据加0后除以多项式，余数为冗余码FCS——CRC检验码的比特序列。</li>
</ol>
<p>Tips：多项式为N位，阶位N-1。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E8%AE%A1%E7%AE%97FCS.png"></p>
<p>接收端检错过程：</p>
<p>把收到的每一帧都除以相同的除数，然后检查得到的余数R。</p>
<ol>
<li>余数为0，判定这个帧没有差错，则接收</li>
<li>余数不为0，判定这个帧有差错（无法确定到位），丢弃。</li>
</ol>
<p>FCS的生成以及接收端CRC检验都是由硬件实现，处理很迅速，因此不会延误数据的传输。</p>
<p>在数据链路层仅仅使用循环冗余检验CRC差错检测技术，只能做到对帧的无差错接收，<br>即”凡事接收端数据链路层接受的帧，我们都能以非常接近于1的概率认为这些帧在传输过程中没有产生<br>差错”。接收端丢弃的帧虽然曾收到了，但是最终还是因为有差错被丢弃。**”凡是接收端数据链路层接收的帧均可以以非常<br>接近1的概率认为无差错”。**</p>
<h4 id="纠错编码——海明码（汉明码）"><a href="#纠错编码——海明码（汉明码）" class="headerlink" title="纠错编码——海明码（汉明码）"></a>纠错编码——海明码（汉明码）</h4><blockquote>
<p>海明码: 发现双比特错，纠正单比特错。</p>
</blockquote>
<p>海明码的工作流程：</p>
<ol>
<li>确定校验码位数r</li>
</ol>
<p>海明不等式：2^r &gt;&#x3D; k+r+1   r为冗余信息位，k为信息位。</p>
<p>eg：要发送的数据：D&#x3D;101101</p>
<p>数据的位数k&#x3D;6，满足不等式的最小r为4，也就是D&#x3D;101101的海明码应该有6+4&#x3D;10位，其中源数据6位，校验码4位。</p>
<ol start="2">
<li>确定校验码和数据的位置</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E7%A1%AE%E5%AE%9A%E6%A0%A1%E9%AA%8C%E7%A0%81%E5%92%8C%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BD%8D%E7%BD%AE.png" alt="确定校验码和数据的位置"></p>
<ol start="3">
<li>求出校验码的值</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%B5%B7%E6%98%8E%E7%A0%811.png" alt="求出校验码的值"></p>
<ol start="4">
<li>检错并纠错</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%B5%B7%E6%98%8E%E7%A0%812.png" alt="检错并纠错"></p>
<h3 id="流量控制与可靠传输机制"><a href="#流量控制与可靠传输机制" class="headerlink" title="流量控制与可靠传输机制"></a>流量控制与可靠传输机制</h3><blockquote>
<p>较高的发送速度和较低的接收能力的不匹配，会造成传输出错，因此流量控制也是数据链路层的一项重要工作。 </p>
</blockquote>
<p>数据链路层的流量控制是点对点的，而传输层的流量控制是端对端的。</p>
<p>数据链路层流量控制手段：接收方收不下就不回复确认。</p>
<p>传输层流量控制手段：接收端给发送端一个窗口公告。</p>
<h4 id="停止-等待协议"><a href="#停止-等待协议" class="headerlink" title="停止-等待协议"></a>停止-等待协议</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE.png" alt="停止-等待协议"></p>
<p>每发送完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧。</p>
<ol>
<li>为什么要有停止-等待协议？</li>
</ol>
<p>除了比特出差错，底层信道还会出现丢包问题。为了实现流量控制。</p>
<ol start="2">
<li>研究停等协议的前提？</li>
</ol>
<p>因为是在讨论可靠传输的原理，所以并不考虑数据是在哪一个层次上传送的。<br>“停止-等待”就是每发送完一个分组就停止发送，等待对方确认，在收到确认后再发送下一个分组。</p>
<blockquote>
<p>丢包：物理线路故障、设备故障、病毒攻击、路由信息错误等原因，会导致数据包的丢失。</p>
</blockquote>
<p><strong>停等协议——无差错情况</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%97%A0%E5%B7%AE%E9%94%99%E6%83%85%E5%86%B5.png" alt="无差错情况"></p>
<p><strong>停等协议——有差错情况</strong></p>
<p>数据帧丢失或检测到帧出错</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%95%B0%E6%8D%AE%E5%B8%A7%E4%B8%A2%E5%A4%B1.png" alt="数据帧丢失"></p>
<p>ack丢失</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ack%E4%B8%A2%E5%A4%B1.png" alt="ack丢失"></p>
<p>ack迟到</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ack%E8%BF%9F%E5%88%B0.png" alt="ack迟到"></p>
<p><strong>信道利用率</strong></p>
<p>发送发在一个发送周期内，有效的发送数据所需要的时间占整个发送周期的比率。</p>
<p>信道利用率&#x3D;(L&#x2F;C)&#x2F;T</p>
<blockquote>
<p>L：T内发送L比特数据。C：发送方数据传输率。T：发送周期，从开始发送数据，到接收到第一个确认帧为止。</p>
</blockquote>
<p><strong>信道吞吐率&#x3D;信道利用率*发送发的发送速率</strong></p>
<h4 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h4><h5 id="后退N帧协议（GBN）"><a href="#后退N帧协议（GBN）" class="headerlink" title="后退N帧协议（GBN）"></a>后退N帧协议（GBN）</h5><p>GBN发送发必须响应的三件事：</p>
<ol>
<li>上层的调用</li>
</ol>
<p>上层要发送数据时，发送方先检查发送窗口是否已满，如果未满，则产生一个帧并将其发送；如果窗口已满<br>，发送方只需将数据返回给上层，暗示上层窗口已满。上层等一会再发送。（实际实现中，发送发可以缓存这些<br>数据，窗口不满时再发送帧）。</p>
<ol start="2">
<li>收到了一个ACK</li>
</ol>
<p>GBN协议中，对n号帧的确认采用累计确认的方式，标明接收方已经收到n号帧和它之前的全部帧。</p>
<ol start="3">
<li>超时事件</li>
</ol>
<p>协议的名字为后退N帧&#x2F;回退N帧，来源于出现丢失和时延过长帧时发送方的行为。就像在停等协议中一样，<br>定时器将再次用于恢复数据帧或确认帧的丢失。如果出现超时，发送方重传所有已发送但未被确认的帧。</p>
<p>GBN接收方要做的事：</p>
<p>如果正确收到n号帧，并且按序，那么接收方为n帧发送一个ack，并将该帧中的数据部分交付给上层。</p>
<p>其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。接收方无需缓存任何失序帧，只需要维护一个信息：<br>expectedseqnum(下一个按序接收的帧序号)。</p>
<p>运行中的GBN:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E8%BF%90%E8%A1%8C%E4%B8%AD%E7%9A%84GBN.png" alt="运行中的GBN"></p>
<p>优点：因连续发送数据帧而提高了信道利用率</p>
<p>缺点：在重传时必须把原来已经正确传送的数据帧重传，使传送效率降低。</p>
<h5 id="选择重传协议（SR）"><a href="#选择重传协议（SR）" class="headerlink" title="选择重传协议（SR）"></a>选择重传协议（SR）</h5><p><strong>SR中的滑动窗口机制</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/SR%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%BA%E5%88%B6.png" alt="SR滑动窗口机制"></p>
<p><strong>发送方必须响应的三件事</strong></p>
<ul>
<li>上层调用</li>
</ul>
<p>从上层收到数据后，SR发送发检查下一个可用于该帧的序号，如果序号位于发送窗口内，则发送数据帧；<br>否则就像GNB一样，要么将数据缓存，要么返回给上层之后在传输。</p>
<ul>
<li>收到一个ACK</li>
</ul>
<p>如果收到ACK，加入该帧序号在窗口内，则SR发送方将那个被确认的帧标记为已接受。如果该帧序号是窗口<br>的下界(最左边第一个窗口对应的序号)，则窗口想前移动到具有最小序号的未确认帧处。如果窗口移动了<br>并且有序号在窗口内的未发送帧，则发送这些帧。</p>
<ul>
<li>超时事件</li>
</ul>
<p>每个帧都有自己的定时器，一个超时事件发生后只重传一个帧。</p>
<p><strong>接收方要做的事</strong></p>
<p>SR接收方将确认一个正确接受的帧而不管其是否按序。失序的帧将被缓存，并返回给发送方一个该帧<br>的确认帧【收谁确认谁】，直到所有帧(即序号更小的帧)皆被收到为止，这是才可以将一批帧按序交付给<br>上层，然后向前移动滑动窗口。</p>
<p><strong>运行中的SR</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E8%BF%90%E8%A1%8C%E4%B8%AD%E7%9A%84SR.png" alt="运行中的SR"></p>
<p><strong>窗口大小的上限</strong></p>
<p>发送窗口最好等于接收窗口</p>
<p>WTMax&#x3D;WRMax&#x3D;2^(n-1)</p>
<blockquote>
<p>WTMax 发送窗口，WRMax 接收窗口，n 表示用多少个比特标帧序号。eg：n&#x3D;2，序号就有 0 1 2 3</p>
</blockquote>
<h3 id="信道划分介质访问控制"><a href="#信道划分介质访问控制" class="headerlink" title="信道划分介质访问控制"></a>信道划分介质访问控制</h3><p>点对点链路：两个相邻结点通过一个链路相连，没有第三者。应用：PPP协议，常用语<strong>广域网</strong>。</p>
<p>广播式链路：所有主机共享通信介质。应用：早起的总线以太网、无线局域网、常用于<strong>局域网</strong>。<br>典型拓扑结构：总线型，星型（逻辑总线型）</p>
<h4 id="介质访问控制"><a href="#介质访问控制" class="headerlink" title="介质访问控制"></a>介质访问控制</h4><blockquote>
<p>介质访问控制的内容是采取一定的措施，使得两对结点之间的通信不会发生互相干扰的情况。</p>
</blockquote>
<p>静态划分信道——信道划分介质访问控制</p>
<blockquote>
<p>信道划分介质访问控制：将使用介质的每个设备与来自同一信道上的其它设备的通信隔离开，把时域和频域<br>资源合理地分配给网络上的设备。</p>
</blockquote>
<p><strong>频分多路复用 FDM</strong></p>
<p>用户分配到一定的频带后，在通信过程中自始至终都占用这个频带。频分复用的所有用户在同样的时间占用不同的带宽<br>（频率带宽）资源。</p>
<p>充分利用传输介质带宽，系统效率提高；由于技术比较成熟，实现也比较容易。</p>
<p><strong>时分多路复用 TDM</strong></p>
<p>将时间划分为一段段等长的时分复用帧（TDM帧）。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙，所有<br>用户轮流占用信道。</p>
<p><strong>波分多路复用 WDM</strong></p>
<p>波分多路复用就是光的频分多路复用，在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，<br>所以各路光信号互不干扰，最后在用波长分解复用器将各路波长分解出来。</p>
<p><strong>码分多路复用 CDM</strong></p>
<p>码分多址（CDMA）是码分复用的一种方式。</p>
<p>1比特分为多个码片&#x2F;芯片（chip），每一站点被指定一个唯一的m位的芯片序列。发送1时站点发送芯片序列，<br>发送0时发送芯片序列反码（通常把0写成-1）。</p>
<p>如何不打架：多个站点同时发送数据的时候，要求各个站点芯片序列相互正交。</p>
<p>如何合并：各路数据在信道中被线性相加。</p>
<p>如何分离：合并的数据和源站规格化内积。</p>
<p><strong>动态分配信道——随机访问介质访问控制</strong></p>
<p>ALOHA协议</p>
<p>纯ALOHA协议思想：不监听信道，不按时间槽发送，随机重发。如果发生冲突，接收方在就会检测出差错，<br>然后不予确认，发送发在一定时间内收不到就会判断发生冲突。超时后等一随机时间再重传。</p>
<p>时隙ALOHA协议</p>
<p>时隙ALOHA协议的思想：把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，<br>若发生冲突，则必须等到下一个时间片开始时刻再发送。</p>
<p>CSMA协议（载波监听多路访问协议）</p>
<blockquote>
<p>CS：载波监听，每一个站在发送数据之前都要检测一下总线上是否有其他计算机再发送数据。（当几个站同时在<br>总线上发送数据时，总线上的信号电压摆动值将会增大。当一个站监测到的信号电压摆动值超过一定门限值时，就认为总线上<br>至少有两个站同时再发送数据，标明产生了碰撞，即发生了冲突。）</p>
</blockquote>
<blockquote>
<p>MA：多点接入，表示许多计算机一多点接入的方式连接在一根总线上。</p>
</blockquote>
<p><strong>1-坚持CSMA</strong></p>
<p>坚持指的是对于监听信道忙之后的坚持。</p>
<p>1-坚持CSMA思想：如果一个主机要发送消息，那么他先监听信道。空闲则直接传输，不必等待。忙则一直监听，知道空闲马上传输。<br>如果有冲突（一段时间内未收到肯定回复），则等待一个随机长的时间再监听，重复上述过程。</p>
<p>优点：只要媒体空闲，站点就马上发送，避免了媒体利用率的损失。</p>
<p>缺点：假如有两个或两个以上的站点有数据要发送，冲突就不可避免。</p>
<p><strong>非坚持CSMA</strong></p>
<p>非坚持指的是对于监听信道忙之后就不继续监听。</p>
<p>非坚持CSMA思想：如果一个主机要发送消息，那么他先监听信道。空闲则直接传输，不必等待。忙则等待一个随机的时间之后再进行监听。</p>
<p>优点：采用随机的重发延迟时间可以肩上冲突发生的可能性。</p>
<p>缺点：可能存在大家都在延迟等待过程，使得媒体仍可能处于空闲状态，媒体使用率降低。</p>
<p><strong>p-坚持CAMS</strong></p>
<p>p-坚持指的是对于监听信道空闲的处理。</p>
<p>p-坚持CSMA思想：如果一个主机要发送消息，那么他先监听信道。空闲则以p概率直接传输，不必等待；概率1-p等待到下一个时间槽再传输。<br>忙则等待一个随机的时间之后在进行监听。</p>
<p>优点：既能像非坚持算法那样减少冲突，又能像1-坚持算法那样减少媒体空闲时间的这种方案。</p>
<p>缺点：发生冲突后还是要坚持把数据帧发送完，造成了浪费。</p>
<p>三种CSMA对比</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">1-坚持CSMA</th>
<th align="center">非坚持CSMA</th>
<th align="center">p-坚持CSMA</th>
</tr>
</thead>
<tbody><tr>
<td align="center">信道空闲</td>
<td align="center">马上发</td>
<td align="center">马上发</td>
<td align="center">p概率马上发，1-p概率等到下一个时隙再发送</td>
</tr>
<tr>
<td align="center">信道忙</td>
<td align="center">继续坚持监听</td>
<td align="center">放弃监听，等待一个随机时间再监听</td>
<td align="center">放弃监听，等待一个随机时间再监听</td>
</tr>
</tbody></table>
<p><strong>动态分配信道——论序访问介质访问控制</strong></p>
<p>令牌传递协议</p>
<p>令牌：一个特俗格式的MAC控制帧，不含任何信息。控制信道的使用，确保同一时刻只有一个结点独占信道。每个结点都可以在一定的时间<br>内（令牌持有时间）获得发送数据的权利，比不是无限之地持有令牌。</p>
<p>缺点：</p>
<p>存在令牌开销、等待延迟、单点故障</p>
<blockquote>
<p>应用于令牌环网（物理星型拓扑，逻辑环形拓扑）<br>采用令牌传送方式的网络常用于负载较重、通信量较大的网络中。</p>
</blockquote>
<p><strong>CSMA&#x2F;CA协议</strong>（载波监听多点接入&#x2F;碰撞避免）</p>
<p>发送数据前，先检测信道是否空闲。</p>
<p>空闲则发出RTS（request to send），RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间等信息；信道忙则等待。</p>
<p>接收端收到RTS后，将响应CTS（clear to send）。</p>
<p>发送端收到CTS后，开始发送数据帧（同时预约信道：发送发告知其他站点自己要传多久数据）。</p>
<p>接收端收到数据帧后，江永CRC来检验数据是否正确，正确则响应ACK帧。</p>
<p>发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止（采用二进制指数退避算法来确定随机的推迟时间）。</p>
<h3 id="局域网基本概念和体系结构"><a href="#局域网基本概念和体系结构" class="headerlink" title="局域网基本概念和体系结构"></a>局域网基本概念和体系结构</h3><p>局域网（Local Area Network）：简称LAN，是指在某一区域内由多台计算机互联成的计算机组，使用广播信道。</p>
<p>特点1：覆盖的地理范围较小，只在一个相对独立的局部范围内联，如一座或集中的建筑群内。</p>
<p>特点2：使用专门铺设的传输介质（双绞线、同轴电缆）进行联网，数据传输速率高（10Mb&#x2F;s～10Gb&#x2F;s）。</p>
<p>特点3：通信延迟时间短，误码率低，可靠性较高。</p>
<p>特点4：各站为平等关系，共享传输信道。</p>
<p>特点5：多采用分布式控制和广播式通信，能进行广播和组播。</p>
<p>决定局域网的主要要素为：<strong>网络拓扑</strong>，<strong>传输介质</strong>与<strong>介质访问控制方法</strong>。</p>
<h4 id="局域网拓扑结构"><a href="#局域网拓扑结构" class="headerlink" title="局域网拓扑结构"></a>局域网拓扑结构</h4><p><strong>星型拓扑</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%98%9F%E5%9E%8B%E6%8B%93%E6%89%91.png" alt="星型拓扑"></p>
<p>中心节点是控制中心，任意两个节点间的通信最多只需两步，传输速度快，并且网络构型简单、建网容易、便于控制和管理。但这种网络<br>系统，网络可靠性低，网络共享能力差，有单点故障问题。</p>
<p><strong>总线型</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%80%BB%E7%BA%BF%E5%9E%8B%E6%8B%93%E6%89%91.png" alt="总线型拓扑"></p>
<p>网络可靠性高、网络节点间响应速度快、共享资源能力强、设备投入量少、成本低、安装使用方便，当某个工作站节点出现故障时，对整个<br>网络系统影响小。</p>
<p><strong>环型拓扑</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E7%8E%AF%E5%9E%8B%E6%8B%93%E6%89%91.png" alt="环形拓扑"></p>
<p>系统中通信设备和线路比较节省。有单点故障问题；由于环路是封闭的，所以不便于扩充，系统响应延时长，且信息传输效率相对较低。</p>
<p><strong>树型拓扑</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%A0%91%E5%9E%8B%E6%8B%93%E6%89%91.png" alt="树型拓扑"></p>
<p>易于拓展，易于隔离故障，也容易有单点故障。</p>
<h4 id="局域网的分类"><a href="#局域网的分类" class="headerlink" title="局域网的分类"></a>局域网的分类</h4><ol>
<li>以太网：以太网是应用最为广泛的局域网，包括标准以太网（10Mbps）、快速以太网（100Mbps）、千兆以太网（1000Mbps）和10G以太网，<br>他们都符合IEEE 802.3系列标准规范。逻辑拓扑总线型，物理拓扑是星型或拓展星型。使用CSMA&#x2F;CD。</li>
<li>令牌环网：物理上采用了星型拓扑结构，逻辑上是环形拓扑结构。已是”明日黄花”。</li>
<li>FDDI（Fiber Distributed Data Interface）：物理上采用了双环形拓扑结构，逻辑上是环形拓扑结构。</li>
<li>ATM（Asynchronous Transfer Mode）：较新型的单元交换技术，使用53字节固定长度的单元进行交换。</li>
<li>无线局域网（Wireless Local Area Network；WLAN）：采用IEEE 802.11标准。</li>
</ol>
<blockquote>
<p>IEEE 802系列标准是IEEE 802 LAN&#x2F;MAN标准委员会制定的局域网、城域网技术标准（1980年2月成立）。其中最广泛使用的有以太网、令牌环、<br>无线局域网等。这一系列标准中的每一个子标准都由委员会中的一个专门工作组负责。</p>
</blockquote>
<h4 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h4><p>由Xerox公司创建并由Xerox、Intel和DEC公司联合开发的基带总线局域网规范，是当今现有局域网采用的最通用的通信协议标准。<br>以太网使用CSMA&#x2F;CD（载波监听多路访问及冲突检测）技术。</p>
<p>以太网在局域网各种技术中占统治性地位：</p>
<ol>
<li>造价低廉</li>
<li>是应用最广泛的局域网技术；</li>
<li>比令牌环网、ATM网便宜，简单；</li>
<li>满足网络速率要求：10Mb&#x2F;s～10Gb&#x2F;s。</li>
</ol>
<p>计算机与外界有局域网的连接是通过通信适配器的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E9%80%9A%E4%BF%A1%E9%80%82%E9%85%8D%E5%99%A8.png" alt="通信适配器"></p>
<p>在局域网中，硬件地址又称为物理地址，或MAC地址。【实际上是标识符】</p>
<blockquote>
<p>MAC地址：每个适配器又一个全球唯一的48位2进制地址，前24位代表厂家（由IEEE规定），后24位厂家自己制定。常用6个16进制数表述，<br>如02-60-8c-e4-b1-21。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/MAC%E5%B8%A7.png" alt="MAC帧"></p>
<h4 id="CSMA-x2F-CD协议（载波监听多点接入-x2F-碰撞检测）"><a href="#CSMA-x2F-CD协议（载波监听多点接入-x2F-碰撞检测）" class="headerlink" title="CSMA&#x2F;CD协议（载波监听多点接入&#x2F;碰撞检测）"></a>CSMA&#x2F;CD协议（载波监听多点接入&#x2F;碰撞检测）</h4><blockquote>
<p>CS：载波监听，每一个站在发送数据之前以及发送数据时都要检测一下总线上是否有其他计算机在发送数据。</p>
</blockquote>
<blockquote>
<p>MA：多点接入，表示许多计算机以多点接入的方式连接在一根总线上。（总线型网络）</p>
</blockquote>
<blockquote>
<p>CD：碰撞检测（冲突检测），”边发送边监听”，适配器发送数据边检测信道上信号的变化情况，以便判断自己在发送数据时其它站是否也在发送数据。</p>
</blockquote>
<p>确定碰撞后的重传时机（截断二进制指数归避算法）：</p>
<ol>
<li>确定基本退避（推迟）时间为争用期2𝞃。</li>
<li>定义参数k，它等于重传次数，但k不超过10，即k&#x3D;min[重传次数，10]。当重传次数不超过10时，k等于重传次数；当重传次数大于10时，<br>k就不再增大而一直等于10。</li>
<li>从离散的整数集合[0,1,2^k-1]中随机取出一个数r，重传所需要退避的时间就是r倍的基本退避时间，即2r𝞃。</li>
<li>当重传达16次仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错。<br>第一次重传，k&#x3D;1，r从{0,1}选；重传推迟时间为0或2𝞃，在这两个时间中随机选一个；若再次碰撞，则在第二次重传时，<br>k&#x3D;2，r从{0，1，2，3}选；重传推迟时间为0或2𝞃或4𝞃或6𝞃，在这四个时间中随机选一个；若再次碰撞，则第三次重传时，k&#x3D;3，r从{0,1,2,3,4,5,6,7}选……</li>
</ol>
<p>最小帧长</p>
<p>真的传输时延至少要两倍于信号在总线中的传播时延。</p>
<p>帧长（bit）&#x2F;数据传输速率≥2𝞃</p>
<p>最小帧长&#x3D;总线传播时延×数据传输速率×2，也就是2𝞃 × 数据传输速率</p>
<h3 id="PPP协议和HDLC协议"><a href="#PPP协议和HDLC协议" class="headerlink" title="PPP协议和HDLC协议"></a>PPP协议和HDLC协议</h3><p><strong>PPP（point to point）</strong></p>
<p>点对点协议是目前使用最广泛的数据链路层协议，用户使用拨号电话接入因特网时一般都是用ppp协议。只支持全双工链路。</p>
<p>ppp协议帧格式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ppp%E5%8D%8F%E8%AE%AE%E5%B8%A7%E6%A0%BC%E5%BC%8F.png" alt="ppp协议帧格式"></p>
<p><strong>HDLC协议（高级数据链路控制High——Level Data Link Control）</strong></p>
<p>高级数据链路控制是一个在同步网上传输数据、面向比特的数据链路高层协议，它是由国际标准化组织ISO根据IBM<br>公司的SDLC（SynchronousData Link Control）协议扩展开发而成的。数据报文可透明传输，用于实现透明传输的”0比特插入法”易于硬件实现。</p>
<p>HDLC帧格式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/HDLC%E5%B8%A7%E6%A0%BC%E5%BC%8F.png" alt="HDLC帧格式"></p>
<ol>
<li>信息帧（I）第1为为0，用来传输数据信息，或使用捎带技术对数据逆行确认；</li>
<li>监督帧（S）10，用于流量控制和差错控制，执行对信息帧的确认、请求重发和请求暂停发送等功能</li>
<li>无编号帧（U）11，用于提供对链路的建立、拆除等多种控制功能。</li>
</ol>
<p><strong>ppp和HDLC比较</strong>：</p>
<ul>
<li>都支持全双工链路</li>
<li>都可以实现透明传输</li>
<li>都可以实现差错检测，但不纠正差错</li>
</ul>
<table>
<thead>
<tr>
<th align="center">PPP协议</th>
<th align="center">面向字节</th>
<th align="center">2B协议字段</th>
<th align="center">无序号和确认机制</th>
<th align="center">不可靠</th>
</tr>
</thead>
<tbody><tr>
<td align="center">HDLC协议</td>
<td align="center">面向比特</td>
<td align="center">没有</td>
<td align="center">有编号和确认</td>
<td align="center">可靠</td>
</tr>
</tbody></table>
<h2 id="网络层-1"><a href="#网络层-1" class="headerlink" title="网络层"></a>网络层</h2><blockquote>
<p>主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是数据报。</p>
</blockquote>
<p>功能：</p>
<ol>
<li>路由选择与分组转发</li>
<li>异构网络互联</li>
<li>拥塞控制</li>
</ol>
<h3 id="数据交换方式"><a href="#数据交换方式" class="headerlink" title="数据交换方式"></a>数据交换方式</h3><p><strong>电路交换</strong></p>
<p>建立连接（呼叫&#x2F;电路建立）-&gt; 通信 -&gt; 释放连接（拆除电路）</p>
<p>优点：</p>
<ul>
<li>通信时延小</li>
<li>有序传输</li>
<li>没有冲突（独占资源）</li>
<li>实时性强</li>
</ul>
<p>缺点：</p>
<ul>
<li>建立连接时间长</li>
<li>线路独占、使用效率低</li>
<li>灵活性差</li>
<li>无差错控制能力</li>
</ul>
<p><strong>报文交换</strong></p>
<blockquote>
<p>报文：源应用发送的信息整体。</p>
</blockquote>
<p>优点：</p>
<ul>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性较高</li>
<li>线路利用率较高</li>
<li>多目标服务</li>
</ul>
<p>缺点：</p>
<ul>
<li>有存储转发时延</li>
<li>报文大小不定，需要网络节点有较大缓存空间</li>
</ul>
<p><strong>分组交换</strong></p>
<blockquote>
<p>分组：把大的数据块分割成小的数据块</p>
</blockquote>
<p>优点：</p>
<ul>
<li>无需建立连接</li>
<li>存储转发，动态分配线路</li>
<li>线路可靠性较高</li>
<li>线路利用率较高</li>
<li>相对于报文交换，存储管理更容易</li>
</ul>
<p>缺点：</p>
<ul>
<li>有存储转发时延</li>
<li>需要传输额外的信息量</li>
<li>乱序到目的主机时，要对分组排序重组</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F.png" alt="三种交换方式"></p>
<ol>
<li>报文交换和分组交换采用存储转发。</li>
<li>传送数据量大，且传送时间远大于呼叫时，选择电路交换。电路交换传输时延最小。</li>
<li>从信道利用率看，报文交换和分组交换由于电路交换，其中分组交换时延更小。</li>
</ol>
<p><strong>数据报方式</strong></p>
<p>为网络层提供无连接服务。</p>
<blockquote>
<p>不事先为分组的传输确定传输路径，每个分组独立确定传输路径，不同分组传输路径可能不同。</p>
</blockquote>
<p><strong>虚电路方式</strong></p>
<p>为网络层提供连接服务。</p>
<blockquote>
<p>首先为分组的传输确定传输路径（建立连接），然后沿该路径（连接）传输系列分组，系列分组传输路径相同，传输结束后拆除连接。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%92%8C%E8%99%9A%E7%94%B5%E8%B7%AF.png" alt="数据报和虚电路"></p>
<h3 id="路由算法与路由协议概述"><a href="#路由算法与路由协议概述" class="headerlink" title="路由算法与路由协议概述"></a>路由算法与路由协议概述</h3><ul>
<li>静态路由算法（非自适应路由算法）</li>
</ul>
<p>管理员手工配置路由信息，简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和较小的商业网络。<br>缺点是路由更新慢，不适用于大型网络。</p>
<ul>
<li>动态路由算法（自适应路由算法）</li>
</ul>
<p>路由器间彼此交换信息，按照路由算法优化出路由表项。路由更新快，适用于大型网络，即使响应链路费用或网络拓扑变化。缺点：<br>算法复杂，增加网络负担。</p>
<p><strong>分层次的路由选择协议</strong></p>
<p>自治系统AS：在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量已确定分组在该AS内的路由，<br>同时还是用一种AS之间的路由协议已确定在AS之间的路由。一个AS内的所有网络都属于一个行政单位来管辖，一个自治系统的所有路由器<br>在本自治系统内都必须连通。</p>
<h3 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F.png" alt="IP数据报格式"></p>
<ul>
<li>版本：IPv4&#x2F;IPv6</li>
<li>首部长度：单位是4B，最小为5。</li>
<li>区分服务：指示期望获得哪种类型的服务。</li>
<li>总长度：首部+数据，单位是1B。</li>
<li>标志：只有2为有意义 x _ _<ul>
<li>中间位DF(Dont Fragment)：DF&#x3D;1，禁止分片；DF&#x3D;0，允许分片</li>
<li>最低位MF(More Fragment)：MF&#x3D;1，后面”还有分片”；MF&#x3D;0，代表最后一片&#x2F;没分片。</li>
</ul>
</li>
<li>生存时间（TTL）：IP分组的保质期。经过一个路由器-1，变成0则丢弃。</li>
<li>协议：数据部分的协议。</li>
<li>首部检验和：只检验首部。</li>
<li>可选字段：0～40B，用来支持排错、测量以及安全措施。</li>
<li>填充：全0，把首部补成4B的整数倍。</li>
</ul>
<h3 id="IPv4地址"><a href="#IPv4地址" class="headerlink" title="IPv4地址"></a>IPv4地址</h3><p> IP地址:全世界唯一的32位&#x2F;4字符标识符,表示路由器主机的接口。</p>
<p>IP地址::&#x3D;{&lt;网络号&gt;&lt;主机号&gt;}</p>
<p>eg：11011111 00000001 00000001 00000001 &#x3D; 223.1.1.1</p>
<p>分类的IP地址：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/IP%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB.png" alt="IP地址分类"></p>
<table>
<thead>
<tr>
<th align="center">网络类别</th>
<th align="center">最大可用网络数</th>
<th align="center">第一个可用的网络号</th>
<th align="center">最后一个可用的网络号</th>
<th align="center">每个网络中的最大主机数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">2<sup>7</sup>-2</td>
<td align="center">1</td>
<td align="center">126</td>
<td align="center">2<sup>24</sup>-2</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">2<sup>14</sup>-1</td>
<td align="center">128.1</td>
<td align="center">191.255</td>
<td align="center">2<sup>16</sup>-2</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">2<sup>21</sup>-1</td>
<td align="center">192.0.1</td>
<td align="center">223.255.255</td>
<td align="center">2<sup>8</sup>-2</td>
</tr>
</tbody></table>
<p>特殊IP地址：</p>
<table>
<thead>
<tr>
<th align="center">NetID 网络号</th>
<th align="center">HostID 主机号</th>
<th align="center">作为IP分组源地址</th>
<th align="center">作为IP分组目的地址</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">全0</td>
<td align="center">全0</td>
<td align="center">可以</td>
<td align="center">不可以</td>
<td align="center">本网范围内表示主机，路由表中用于表示默认路由(表示整个Internet网络)</td>
</tr>
<tr>
<td align="center">全0</td>
<td align="center">特定值</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">表示本网内某个特定主机</td>
</tr>
<tr>
<td align="center">全1</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">本网广播地址(路由器不转发)</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全0</td>
<td align="center">不可以</td>
<td align="center">不可以</td>
<td align="center">网络地址，表示一个网络</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">直接广播地址，对特定网络上的所有主机进行广播</td>
</tr>
<tr>
<td align="center">127</td>
<td align="center">任何数(非全0&#x2F;1)</td>
<td align="center">可以</td>
<td align="center">可以</td>
<td align="center">用于本地软件环回测试，称为环回地址</td>
</tr>
</tbody></table>
<p>私有IP地址：</p>
<table>
<thead>
<tr>
<th align="center">地址类别</th>
<th align="center">地址范围</th>
<th align="center">网段个数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A类</td>
<td align="center">10.0.0.0~10.255.255.255</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">B类</td>
<td align="center">172.16.0.0~172.31.255.255</td>
<td align="center">16</td>
</tr>
<tr>
<td align="center">C类</td>
<td align="center">192.168.0.0~192.168.255.255</td>
<td align="center">256</td>
</tr>
</tbody></table>
<p>ps：路由器对目的地址是私有IP地址的数据报一律不进行转发。</p>
<h3 id="网络地址转换NAT"><a href="#网络地址转换NAT" class="headerlink" title="网络地址转换NAT"></a>网络地址转换NAT</h3><p> 网络地址转换NAT(Network Address Translation): 在专用网连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的外部全球IP地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/nat.png" alt="NAT"></p>
<p>假如主机A要发送消息给主机B，A在封装数据报时，源地址和端口就是主机A的，目的地址是主机B的地址，当数据报到达NAT路由器时，会将数据报里的源地址和端口号修改为NAT路由器自己的地址和端口号，这个数据报此时就能够在因特网中进行传输了。</p>
<p>当主机B给主机C发送消息，主机B封装数据报时，目的地址和端口就是NAT路由器的地址和端口号，当数据报到达路由器时，会按照NAT转换表将目的地址和端口号替换为主机C的。</p>
<h3 id="子网划分和子网掩码"><a href="#子网划分和子网掩码" class="headerlink" title="子网划分和子网掩码"></a>子网划分和子网掩码</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86.png" alt="子网划分"></p>
<p>子网掩码：网络号（子网号）全1，主机号全零</p>
<h3 id="无分类编址CIDR"><a href="#无分类编址CIDR" class="headerlink" title="无分类编址CIDR"></a>无分类编址CIDR</h3><ul>
<li>消除了传统的A类、B类和C类地址以及划分子网的概念。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/CIDR.png" alt="CIDR"></p>
<p>CIDR记法：IP地址后加上“&#x2F;”，然后写上网络前缀（可以任意长度）的位数。eg：128.14.32.0&#x2F;20</p>
<ul>
<li>融合子网掩码，方便子网划分。</li>
</ul>
<p>CIDR把网络前缀都相同的连续的IP地址组成一个”CIDR地址块“。</p>
<p>128.14.35.7&#x2F;20是某CIDR地址块中的一个地址</p>
<p>​    二进制：10000000 00001110 00100011 00000111</p>
<p>最小地址：10000000 00001110 00100000 00000000</p>
<p>最大地址：10000000 00001110 00101111 11111111</p>
<p>​    地址块：128.14.32.0&#x2F;20          ”&#x2F;20地址块“ </p>
<p>子网掩码：11111111 11111111 11110000 00000000</p>
<h4 id="构成超网"><a href="#构成超网" class="headerlink" title="构成超网"></a><strong>构成超网</strong></h4><p>将多个子网聚合成一个较大的子网，叫做构成超网，或路由聚合。</p>
<p>方法：将网络前缀缩短。</p>
<p>eg：网络1：206.1.0.0&#x2F;17；网络2：206.1.128.0&#x2F;17。将两个网络聚合成一个网络。</p>
<p>网络1:</p>
<p>二进制：11001101 00000001 00000000 00000000</p>
<p>掩    码：11111111 11111110 00000000 00000000</p>
<p>网络2:</p>
<p>二进制：11001101 00000001 10000000 00000000</p>
<p>掩    码：11111111 11111110 00000000 00000000</p>
<p>聚合之后的网络：206.1.0.0&#x2F;16。</p>
<h3 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h3><p>由于在实际网络的链路上传送数据帧时，最终必须使用mac地址。</p>
<p>ARP协议：完成主机或路由器IP地址到MAC地址的映射。</p>
<p>ARP协议使用过程：</p>
<p>检查ARP高速缓存，有对应表项则写入MAC帧，没有则用目的MAC地址为FF-FF-FF-FF-FF-FF-FF的帧封装并广播ARP请求，同一局域网中所有主机都能收到该请求。目的主机收到请求后就会像源主机单播一个ARP响应分组，源主机收到后将此映射写入ARP缓存（10-20min更新一次）。</p>
<p>ARP协议4种典型情况：</p>
<ol>
<li>主机A发给本网络上的主机B：用ARP找到主机B的硬件地址；</li>
<li>主机A发给另一网络上的主机B：用ARP找到本网络上一个路由器（网关）的硬件地址；</li>
<li>路由器发给本网络的主机A：用ARP找到主机A的硬件地址；</li>
<li>路由器发给另一网络的主机B：用ARP找到本网络上的一个路由器的 硬件地址。</li>
</ol>
<p><strong>ARP协议自动进行</strong></p>
<h3 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h3><p>动态主机配置协议DHCP是应用层协议，使用客户&#x2F;服务器方式，客户端和服务端通过广播方式进行交互，基于UDP。DHCP提供即插即用联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租。</p>
<ol>
<li>主机广播DHCP发现报文（试图找到网络中的服务器，服务器获得一个IP地址）</li>
<li>DHCP服务器广播DHCP提供报文（服务器拟分配给主机一个IP地址及相关配置，先到先得）</li>
<li>主机广播DHCP请求报文（主机想服务器请求提供IP地址）</li>
<li>DHCP服务器广播DHCP确认报文（正式将IP地址分配给主机）</li>
</ol>
<h3 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEICMP.png" alt="网络控制报文协议ICMP"></p>
<p><strong>ICMP差错报告报文</strong>：</p>
<ol>
<li>终点不可达：当路由器或主机不能交付数据报时就像源点发送终点不可达报文。</li>
<li>源点抑制：当路由器或主机由于拥塞而迭起数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。</li>
<li>时间超过：当路由器收到生存时间TTL&#x3D;0的数据报时，除丢弃该数据外，还要向源点发送时间超过报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。</li>
<li>参数问题：当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文。</li>
<li>改变路由（重定向）：路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。</li>
</ol>
<p><strong>ICMP差错报告报文数据字段</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ICMP%E5%B7%AE%E9%94%99%E6%8A%A5%E5%91%8A%E6%8A%A5%E6%96%87%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5.png" alt="ICMP差错报告报文数据字段"></p>
<p><strong>不应发送ICMP差错报文的情况</strong>：</p>
<ol>
<li>对ICMP差错报告报文不在发送ICMP差错报告报文。</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。</li>
<li>对具有组播地址的数据报都不发送ICMP差错报告报文。</li>
<li>对具有特俗地址（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文。</li>
</ol>
<p><strong>ICMP询问报文</strong>：</p>
<ol>
<li>回送请求和回答报文：主机或路由器向特定目的主机发出的询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。测试目的站是否可达以及了解其相关状态。</li>
<li>时间戳请求和回答报文：请某个主机或路由器回答当前的日期和时间。用来进行时钟同步和测量时间。</li>
<li><del>掩码地址请求和回答报文</del></li>
<li><del>路由器询问和通告报文</del></li>
</ol>
<p><strong>ICMP的应用</strong></p>
<p>PING：测试两个主机之间的连通性，使用了ICMP回送请求和回答报文。</p>
<p>Traceroute：跟踪一个分组从源点到终点的路径，使用了ICMP时间超过差错报告报文。</p>
<h3 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h3><blockquote>
<p>IPv6从根本上决解地址耗尽问题。方法：改进首部格式；快速处理&#x2F;转发数据报；支持QoS。</p>
</blockquote>
<p><strong>IPv6出局报格式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/ipv6%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F.png" alt="IPv6数据报格式"></p>
<ul>
<li>版本致命了协议版本，总是6</li>
<li>优先级：区分数据报的类别和优先级</li>
<li>“流”是互联网上从特定源点到特定终点的一系列数据报。所有属于同一个流的数据报都具有同样的一个流的数据报都具有同样的流标签。</li>
<li>下一个首部：表示下一个扩展首部或上层协议首部。</li>
<li>条数限制：相当于IPv4的TTL</li>
</ul>
<p><strong>IPv6和IPv4</strong></p>
<ol>
<li>IPv6将地址从32位（4B）扩大到128位（16B），更大的地址空间。</li>
<li>IPv6将IPv4的<strong>校验和字段彻底移除</strong>，以减少每跳的处理时间。</li>
<li>IPv6将IPv4的可选字段移除首部，变成了扩展首部，称为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率。</li>
<li>IPv6支持<strong>即插即用</strong>（即自动配置），不需要DHCP协议。</li>
<li>IPv6首部长度必须是<strong>8B的整数倍</strong>，IPv4首部是4B的整数倍。</li>
<li>IPv6<strong>只能在主机处分片</strong>，IPv4可以在路由器和主机处分片。</li>
<li>ICMPv6:附加报文类型“分组过大”。</li>
<li>IPv6支持资源的预分配，支持实时视像等要求，保证一定的带宽和时延的应用。</li>
<li>IPv6取消了协议字段，改成下一个首部字段。</li>
<li>IPv6取消了总长度字段，该用有效载荷长度字段。</li>
<li>IPv6取消了服务类型字段。</li>
</ol>
<p><strong>IPv6地址表示形式</strong></p>
<p>一般形式</p>
<p>冒号十六进制记法：4BF5:AA12:0216:FEBC:BA5F:039A:BE9A:2170</p>
<p>压缩形式</p>
<p>4BF5:0000:0000:0000:BA5F:039A:000A:2176</p>
<p>4BF5:0:0:0:BA5F:39A:A:2176</p>
<p>零压缩：一连串连续的0可以被一对冒号取代。</p>
<p>FF05:0:0:0:0:0:0:B3</p>
<p>FF05::B3</p>
<blockquote>
<p><strong>双冒号表示法在一个地址种仅可以出现一次。</strong></p>
</blockquote>
<p><strong>IPv6基本地址类型</strong></p>
<p>单播：一对一通信，可做源地址+目的地址</p>
<p>多播：一对多通信，可做目的地址</p>
<p>任播：一对多中的一个通信，可做目的地址</p>
<p><strong>IPv6向IPv4过渡的策略</strong></p>
<ul>
<li>双栈协议</li>
</ul>
<p>双协议栈技术就是指在一台设备上同时启用IPv4协议栈和IPv6协议栈。这样的话，这台设备既能和IPv4网络通信，又能和IPv6网络通信。如果这台设备是一个路由器，那么这台路由器的不同接口上，分别配置了IPv4地址和IPv6地址，并很可能分别连接了IPv4网络和IPv6网络。如果这台设备是一个计算机，那么它将同时拥有IPv4地址和IPv6地址，并具备同时处理这两个协议地址的功能。</p>
<ul>
<li>隧道技术</li>
</ul>
<p>通过使用互联网络的基础设施在网络之间传递数据的方式。使用隧道传递的数据（或负载）可以是不同协议的数据帧或包。隧道协议将其它协议的数据帧或包重新封装然后通过隧道发送。</p>
<h3 id="RIP协议与距离向量算法"><a href="#RIP协议与距离向量算法" class="headerlink" title="RIP协议与距离向量算法"></a>RIP协议与距离向量算法</h3><p>RIP是一种分布式的基于距离向量的路由选择协议，是因特网的协议标准，最大优点是简单。</p>
<p>RIP协议要求网络中每一个路由器都维护从它自己到其它每一个目的网络的唯一最佳距离记录（即一组距离）。距离：通常为“跳数”，即从源端口到目的端口所经过的路由器个数，经过一个路由器跳数+1。特别的，从一路由器到直接连接的网络距离为1。RIP允许一条路由最多只能包含15个路由器，因此距离为16表示网络不可达。<strong>RIP协议只适用于小互联网</strong>。</p>
<p>RIP协议和谁交换？多久交换一次？交换什么？</p>
<ol>
<li>仅和相邻路由器交换信息。</li>
<li>路由器交换的信息是自己的路由表。</li>
<li>每30秒交换一次路由信息，只知道自己连接的网络的距离（距离为1），接着每一个路由器也只和数据非常有限的相邻路由器交换并更新路由信息。</li>
<li>经过若干次更新后，所有路由器最终都会知道到达本自治系统任何一个网络的最短路径和下一跳路由器的地址，即“收敛”。</li>
</ol>
<p><strong>距离向量算法</strong></p>
<ol>
<li>修改相邻路由器发来的RIP报文中所由表项</li>
</ol>
<p>对地址为X的相邻路由器发来的RIP报文，修改此报文中的所有项目：把“下一跳”字段中的地址改为X，并把所有的”距离“字段+1</p>
<ol start="2">
<li><p>对修改后的RIP报文中的每一个项目，进行一下步骤：</p>
<ol>
<li><p>R1路由表中若没有Net3，这把该项目填入R1</p>
</li>
<li><p>R1路由表中若没有Net3，则查看下一跳路由器地址：</p>
<p> 若下一跳是X，则用收到的项目替换源路由表中的项目；</p>
<p> 若下一跳不是X，原来距离比从X走的距离远则更新，否则不做处理。</p>
</li>
</ol>
</li>
<li><p>若180s还没收到相邻路由器X的更新路由表，则把X记为不可达的路由器，即把距离设置为16。</p>
</li>
<li><p>返回</p>
</li>
</ol>
<p><strong>RIP协议的报文格式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/RIP%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png" alt="RIP协议的报文格式"></p>
<p>RIP的特点：当网络出现故障时，要经过比较长的时间（例如数分钟）才能将此信息传送到所有的路由器，“慢收敛”。</p>
<h3 id="OSPF协议与链路状态算法"><a href="#OSPF协议与链路状态算法" class="headerlink" title="OSPF协议与链路状态算法"></a>OSPF协议与链路状态算法</h3><p>开放最短路径优先OSPF协议：“开放”标明OSPF协议不是受某一家厂商控制，而是公开发表的；“最短路径优先”是因为使用了Dijkatra提出的最短路径算法SPF。</p>
<p>OSPF最主要的特征就是使用分布式的<strong>链路状态协议</strong>。</p>
<p>OSPF的特点：</p>
<ol>
<li><p>使用洪泛法向自治系统内所有路由器发送消息，即路由器通过输出端口向所有相邻的路由器发送信息，而每一个相邻路由器又再次将此信息发往其所有的相邻路由器。<strong>广播</strong></p>
<p> 最终整个区域内所有路由器都得到了这个信息的一个副本。</p>
</li>
<li><p>发送的信息就是与本路由器相邻的所有路由器的链路状态（本路由器和哪些路由器相邻，以及该链路的度量&#x2F;代价——费用、距离、时延、带宽等）。</p>
</li>
<li><p>只有当链路状态发生变化时，路由器才向所有路由器洪泛发送此信息。</p>
<p> 最后，所有路由器都能建立一个链路状态数据库，即全网拓扑图。</p>
</li>
</ol>
<p><strong>链路状态路由算法</strong></p>
<ol>
<li>每个路由器发现它的邻居节点【HELLO问候分组】，并了解邻居节点的网络地址。</li>
<li>设置到它的每个邻居的成本度量metric。</li>
<li>构造【DD数据库描述分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</li>
<li>如果DD分组中的摘要自己都有，则邻站不做处理；如果有没有的或者是更新的，则发送【LSR链路状态请求分组】请求自己没有的和比自己更新的信息。</li>
<li>收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认。</li>
</ol>
<p>只要一个路由器的链路状态发生变化：</p>
<ol start="5">
<li>泛洪发送【LSU链路状态更新分组】进行更新。</li>
<li>更新完毕后，其它站返回一个【LSAck链路状态确认分组】进行确认。</li>
<li>使用Dijkstra根据自己的链路状态数据库构造到其他节点间的最短路径。</li>
</ol>
<p><strong>OSPF的区域</strong></p>
<p>为了使OSPF能够用于规模很大的网络，OSPF将一个自治系统再划分为若干个更小的范围，叫做区域。每一个区域都有一个32位的区域标识符（用点分十进制表示）。区域也不能太大，在一个区域内的路由器最好不超过200个。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/OSPF%E7%9A%84%E5%8C%BA%E5%9F%9F.png" alt="OSPF的区域"></p>
<p><strong>OSPF其他特点</strong></p>
<ol>
<li>每个30min，要刷新一次数据库中的链路状态。</li>
<li>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF协议要比距离向量协议RIP好得多。</li>
<li>OSPF不存在坏消息传得慢的问题，它的收敛速度很快。</li>
</ol>
<h3 id="BGP协议"><a href="#BGP协议" class="headerlink" title="BGP协议"></a>BGP协议</h3><p>与其他AS的邻站BGP发言人交换信息。</p>
<p>交换的网络可达性的信息，即要到达某个网络所要经过的一系列AS。</p>
<p>发生变化时更新有变化的部分。</p>
<p>BGP所交换的网络可达性的信息就是要到达某个网络所要经过的一系列AS。当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就根据数据所采用的呃策略从收到的路由信息中找出到达各AS的较好路由。</p>
<p><strong>BGP协议报文格式</strong></p>
<p>一个BGP发言人与其它自治系统中的BGP发言人要交换路由信息，就要先建立TCP连接，即通过TCP传送，然后再此连接上交换BGP报文以建立BGP会话（session），利用BGP会话交换路由信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/BGP%E5%8D%8F%E8%AE%AE%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F.png" alt="BGP协议报文格式"></p>
<p>BGP是应用层协议，借助TCP传送。</p>
<p><strong>BGP协议特点</strong></p>
<p>BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</p>
<p>在BGP刚刚运行时，BGP的邻站是交换整个的BGP路由表。但以后只需要在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。</p>
<p><strong>BGP-4的四种报文</strong></p>
<ol>
<li>OPEN（打开）报文：用来与相邻的另一个BGP发言人建立关系，并认证发送方。</li>
<li>UPDATE（更新）报文：通告新路径或撤销原路径。</li>
<li>KEEPALIVE（保活）报文：在无UPDATE时，周期性证实邻站的连通性；也作为OPEN的确认。</li>
<li>NOTIFICATION（通知）报文：报告先前报文的差错；也被用于关闭连接。</li>
</ol>
<p><strong>三种路由协议比较</strong></p>
<p>RIP是一种分布式的基于距离向量的内部网关路由选择协议，用过广播UDP报文来交换路由信息。</p>
<p>OSPF是一个内部网关协议，要交换的信息量较大，应使报文的长度尽量短，所以不使用传输层协议（如UDP或TCP），而是直接采用IP。</p>
<p>BGP是一个外部网关协议，在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠传输，所以采用TCP。</p>
<table>
<thead>
<tr>
<th align="center">协议</th>
<th align="center">RIP</th>
<th align="center">OSPF</th>
<th align="center">BGP</th>
</tr>
</thead>
<tbody><tr>
<td align="center">类型</td>
<td align="center">内部</td>
<td align="center">内部</td>
<td align="center">外部</td>
</tr>
<tr>
<td align="center">路由算法</td>
<td align="center">距离-向量</td>
<td align="center">链路状态</td>
<td align="center">路径-向量</td>
</tr>
<tr>
<td align="center">传递协议</td>
<td align="center">UDP</td>
<td align="center">IP</td>
<td align="center">TCP</td>
</tr>
<tr>
<td align="center">路径选择</td>
<td align="center">跳数最少</td>
<td align="center">代价最低</td>
<td align="center">较好，非最佳</td>
</tr>
<tr>
<td align="center">交换节点</td>
<td align="center">和本节点相连的路由器</td>
<td align="center">网络中的所有路由器</td>
<td align="center">和本节点相邻的路由器</td>
</tr>
<tr>
<td align="center">交换内容</td>
<td align="center">当前本路由器知道的全部信息，即自己的路由表</td>
<td align="center">与本路由器相邻的所有路由器的链路状态</td>
<td align="center">首次   整个路由表<br />非首次  有变化的部分</td>
</tr>
</tbody></table>
<h3 id="IP组播"><a href="#IP组播" class="headerlink" title="IP组播"></a>IP组播</h3><p> <strong>IP数据报的三种传输方式</strong>：</p>
<p>单播：单播用于发送数据报到单个目的地，且每发送一份单播报文都是用一个单播IP地址作为目的地址。是一种点对点传输方式。</p>
<p>广播：广播是指发送数据报到同一广播域或子网内的所有设备的一种数据传输方式，是一种点对多点传输方式。</p>
<p>组播：当网络中的某些用户需要特定数据时，组播数据发送者仅发送一次数据，借助组播路由协议为组播数据报建立组播分发树，被传递的数据到达距离用户端尽可能近的节点后才开始复制和分发，是一种点对多点传输方式。</p>
<p><strong>IP组播地址</strong></p>
<p>IP组播地址让源设备能够将分组发送给一组设备。属于多播组的设备将被分配一个组播组IP地址（一群共同需求主机的相同标识）。</p>
<p>组播地址范围为224.0.0.0～239.255.255.255（D类地址），一个D类地址表示一个组播组。只能用作分组的目标地址。源地址总是为单播地址。</p>
<ol>
<li>组播数据报也是“尽最大努力交付”，不提供可靠交付，应用于UDP。</li>
<li>对组播数据报不产生ICMP差错报文</li>
<li>并非所有D类地址都可以作为组播地址</li>
</ol>
<p><strong>组播的两个情况</strong></p>
<ul>
<li>硬件组播</li>
</ul>
<p>同单播地址一样，组播IP地址也需要相应的组播MAC地址在本地网络中实际传送帧。组播MAC地址以十六进制值01-00-5E打头，余下的6个十六进制位是根据IP组播地址的最后23为转换得到的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%92%AD.png" alt="硬件组播"></p>
<p>收到多播数据报的主机，还要在IP层利用软件进行过滤，把不是本主机要接收的数据报丢弃。</p>
<ul>
<li>在因特网的范围内进行组播</li>
</ul>
<p><strong>IGMP协议</strong></p>
<p>IGMP协议让路哟起知道本局域网上是否有主机（的进程）参加或退出了某个组播组。</p>
<p>IGMP工作的两个阶段</p>
<ol>
<li>某主机要加入组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要称为该组的成员。本地组播路由器收到IGMP报文后，要利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器。</li>
<li>本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员。</li>
</ol>
<p>只要有一个主机对某个组相应，那么组播路由器就认为这个组是活跃的；如果经过几次探询后没有一个主机相应，组播路由器就认为本网络上的没有此组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器。</p>
<p><strong>组播路由器知道的成员关系只是所连接的局域网中无组播组的成员。</strong></p>
<p><strong>组播路由选择协议</strong></p>
<p>组播路由选择协议目的是找出以源主机为根节点的组播转发树。</p>
<p>构造树可以避免在路由器之间兜圈子。</p>
<p>对不同的多播组对应于不同的多播转发树；同一个多播组，对不同的源点也会有不同的多播转发树。</p>
<p>组播路由选择协议常使用的三种算法：</p>
<ul>
<li>基于链路状态的路由选择</li>
<li>基于距离-向量的路由选择</li>
<li>协议无关的组播（稀疏&#x2F;密集）</li>
</ul>
<h3 id="移动IP"><a href="#移动IP" class="headerlink" title="移动IP"></a>移动IP</h3><p> <strong>移动IP相关术语</strong></p>
<p>移动IP技术是移动节点（计算机&#x2F;服务器等）以固定的网络IP地址，实现跨越不同网段的漫游功能，并保证了基于网络IP的网络权限在漫游过程中不发生任何改变。</p>
<p><strong>移动节点</strong>：具有永久IP地址的移动设备</p>
<p><strong>归属代理（本地代理）</strong>：一个移动节点拥有的就“居所”称为归属网络，在归属网络中代表移动节点执行移动管理功能的实体叫做归属代理。</p>
<p><strong>外部代理（外地代理）</strong>：在外部网络中帮助移动节点完成移动管理功能的实体称为外部代理。</p>
<p><strong>永久地址（归属地址&#x2F;主地址）</strong>：移动站点在归属网络中的原始地址。</p>
<p><strong>转交地址（辅地址）</strong>：移动站点在外部网络使用的临时地址。</p>
<p><strong>移动IP通信过程</strong></p>
<p>A刚进入外部网络：</p>
<ol>
<li>在外部代理登记获得一个转交地址，离开时注销；</li>
<li>外地代理向本地代理登记转交地址。</li>
</ol>
<p>B给A发送数据报：</p>
<ol>
<li>本地代理接获数据报。</li>
<li>本地代理在封装数据报，新的数据报目的地址是转交地址，发给外部代理（隧道）。</li>
<li>外部代理拆封数据报并发给A。</li>
</ol>
<p>A给B发送数据报：</p>
<ol>
<li>A用自己的主地址作为数据报源地址，用B的IP地址作为数据报的目的地址。</li>
</ol>
<p>A移动到了下一个网络：</p>
<ol>
<li>在新外部代理登记注册一个转交地址</li>
<li>新外部代理给本地代理发送新的转交地址（覆盖旧的）</li>
<li>通信</li>
</ol>
<p>A回到了归属网络：</p>
<ol>
<li>A向本地代理注销转交地址</li>
<li>按原始方式通信</li>
</ol>
<h2 id="传输层-1"><a href="#传输层-1" class="headerlink" title="传输层"></a>传输层</h2><h3 id="传输层概述"><a href="#传输层概述" class="headerlink" title="传输层概述"></a>传输层概述</h3><p>传输层使用网络层的服务为应用层提供通信服务。传输层的功能：</p>
<ol>
<li><p>传输层提供进程和进程之间的逻辑通信</p>
</li>
<li><p>复用和分用</p>
</li>
<li><p>传输层对收到的报文进行差错检测</p>
</li>
<li><p>传输层的两种协议（TCP、UDP）</p>
<ol>
<li><p>TCP</p>
<p> 面向连接的传输控制协议。传送数据之前必须建立连接，数据传送结束后要释放连接。不提供传送结束后要释放连接。不提供广播或多播服务。由于TCP要提供可靠的面向连接的传输服务，因此不可避免增加了许多开销：确认、流量控制、计时器及连接管理。<strong>可靠，面向连接，时延大，适用于大文件。</strong></p>
</li>
<li><p>UDP</p>
<p> 无连接的用户数据报协议UDP。传送数据之前不需要建立连接，收到UDP报文后也不需要给出任何确认。<strong>不可靠，无连接，时延小，适用于小文件。</strong></p>
</li>
</ol>
</li>
</ol>
<p><strong>传输层的寻址与端口</strong></p>
<p>复用：应用层所有的应用进程都可以通过传输层再传输到网络层。</p>
<p>分用：传输层从网络层收到数据后交付指明的应用进程。</p>
<p>逻辑端口&#x2F;软件端口：端口是传输层的SAP，标识主机中的应用进程。端口号只有本地意义，在因特网中不同计算机的相同端口是没有联系的。端口号长度为16bit，能表示65536个不同的端口号。</p>
<p>端口号：</p>
<ul>
<li><p>服务端使用的端口号</p>
<ul>
<li><p>熟知端口号<strong>0～1023</strong></p>
<p>  给TCP&#x2F;IP最重要的一些应用程序，让所有用户都知道。</p>
</li>
<li><p>登记端口号1024～49151</p>
<p>  为没有熟知端口号的应用程序使用的。</p>
</li>
</ul>
</li>
<li><p>客户端使用的端口号<strong>49152～65535</strong></p>
<p>  仅在客户端进程运行时才动态选择</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">应用程序</th>
<th align="center">FTP</th>
<th align="center">TELNET</th>
<th align="center">SMTP</th>
<th align="center">DNS</th>
<th align="center">TFTP</th>
<th align="center">HTTP</th>
<th align="center">SNMP</th>
</tr>
</thead>
<tbody><tr>
<td align="center">熟知端口号</td>
<td align="center">21</td>
<td align="center">23</td>
<td align="center">25</td>
<td align="center">53</td>
<td align="center">69</td>
<td align="center">80</td>
<td align="center">161</td>
</tr>
</tbody></table>
<h3 id="UDP协议（用户数据报协议）"><a href="#UDP协议（用户数据报协议）" class="headerlink" title="UDP协议（用户数据报协议）"></a>UDP协议（用户数据报协议）</h3><p>UDP只在IP数据报服务之上增加了很少功能，即复用分用和差错检测功能。</p>
<p>UDP的主要特点：</p>
<ol>
<li>UDP是无连接的，减少开销和发送数据之前的时延。</li>
<li>UDP使用最大努力交付，即不保证可靠交付。</li>
<li>UDP是面向报文的，适合一次性传输少量数据的网络应用。</li>
<li>UDP无拥塞控制，适合很多实时应用。</li>
<li>UDP首部开销小，8B，TCP 20B。</li>
</ol>
<p><strong>UDP首部格式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/UDP%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F.png" alt="UDP首部格式"></p>
<p>分用时，找不到对应的目的端口号，就丢弃报文，并给发送方发送ICMP“端口不可达”差错报告报文。 </p>
<p><strong>UDP校验</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/UDP%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F.png" alt="UDP数据报格式"></p>
<p>伪首部只有在计算检验和时才出现，不向下传送也不向上递交。</p>
<p>17：封装UDP报文的IP数据报首部协议字段是17。</p>
<p>UDP长度：UDP首部8B+数据部分长度（不包括伪首部）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/UDP%E6%A0%A1%E9%AA%8C.png" alt="UDP校验"></p>
<p>在发送端：</p>
<ol>
<li>填上伪首部</li>
<li>全0填充检验和字段</li>
<li>全0填充数据部分（UDP数据报要看成许多4B的字串接起来）</li>
<li>伪首部+首部+数据部分采用二进制反码求和</li>
<li>把和求反码填入校验和字段</li>
<li>去掉伪首部，发送</li>
</ol>
<p>在接收端：</p>
<ol>
<li>填上伪首部</li>
<li>伪首部+首部+数据部分采用二进制反码求和</li>
<li>结果全为1则无差错，否则丢弃数据报&#x2F;交给应用层附上出差错的警告</li>
</ol>
<h3 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h3><p>特点：</p>
<ol>
<li><p>TCP是面向连接（虚连接）的传输层协议。</p>
</li>
<li><p>每一条TCP连接只能有两个端点，每一个TCP连接只能是点对点的。</p>
</li>
<li><p>TCP提供可靠交付的服务，无差错、不丢失、不重复、按序到达。</p>
</li>
<li><p>TCP提供全双工通信。</p>
<p> 发送缓存：准备发送的数据&amp;已发送但尚未接收到确认的数据</p>
<p> 接收缓存：按序到达但尚未被接收应用程序读取的数据&amp;不按序到达的数据</p>
</li>
<li><p>TCP面向字节流</p>
<p> TCP把应用程序交下来的数据看成仅仅是一连串的无结构的字节流。</p>
</li>
</ol>
<p><strong>TCP报文首部格式</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/TCP%E6%8A%A5%E6%96%87%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F.png" alt="TCP报文首部格式"></p>
<p> <strong>序号</strong>：在一个TCP连接中传送的字节流中的每一个字节都按顺序编号，本字段表表示报文段所发送数据的第一个字节的序号。</p>
<p><strong>确认号</strong>：期望收到对方下一个报文段的第一个数据字节的序号。若确认号为N，则证明到序号N-1为止的所有数据都已正确收到。</p>
<p>**数据偏移(首部长度)**：TCP报文段的数据起始处距离TCP报文段的起始处有多远，以4B为单位，即1个数值是4B。</p>
<p><strong>6个控制位</strong></p>
<ul>
<li><strong>紧急位URG</strong>：URG&#x3D;1时，标明此报文段中有紧急数据，是高优先级的数据，应尽快传送，不用在缓存里排队，配合紧急指针字段使用。</li>
<li><strong>确认位ACK</strong>：ACK&#x3D;1时确认号有效，在连接建立后所有传送的报文段都必须把ACK置为1。</li>
<li><strong>推送位PSH</strong>：PSH&#x3D;1时，接收方尽快交付接收应用进程，不再等到缓存填满再向上交付。</li>
<li><strong>复位RST</strong>：RST&#x3D;1时，标明TCP连接中出现严重差错，必须释放连接，然后再重新建立传输链接。</li>
<li><strong>同步位SYN</strong>：SYN&#x3D;1时，表明是一个链接请求&#x2F;连接接受报文。</li>
<li><strong>终止位FIN</strong>：FIN&#x3D;1时，表明此报文段发送方数据已发完，要求释放连接。</li>
</ul>
<p><strong>窗口</strong>：指的是发送本报文段的一方的接收窗口，即现在允许对方发送的数据量。</p>
<p><strong>检验和</strong>：检验首部+数据，检验时要加上12B伪首部，第四个字段为6。</p>
<p><strong>紧急指针</strong>：URG&#x3D;1时才有意义，指出本报文段中紧急数据的字节数。</p>
<p><strong>选项</strong>：最大报文段长度MSS、窗口扩大、时间戳、选择确认……</p>
<p>TCP连接的三个阶段：</p>
<p>连接建立 -&gt; 数据传输 -&gt; 连接释放</p>
<p><strong>TCP建立连接</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/TCP%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5.png" alt="TCP建立连接"></p>
<ol>
<li><p>客户端发送数据连接请求报文段，无应用层数据。</p>
<p> SYN&#x3D;1，seq&#x3D;x(随机)</p>
</li>
<li><p>服务器端为该TCP连接分配缓存和随机变量，并向客户端返回确认报文段，允许连接，无应用层数据。</p>
<p> SYN&#x3D;1，ACK&#x3D;1，seq&#x3D;y(随机)，ack&#x3D;x+1</p>
</li>
<li><p>客户端为该TCP连接分配缓存和变量，并向服务器端返回确认的确认，可以携带数据。</p>
<p> SYN&#x3D;0，ACK&#x3D;1，seq&#x3D;x+1，ack&#x3D;y+1</p>
</li>
</ol>
<p><strong>SYN洪泛攻击</strong></p>
<p>SYN洪泛攻击发生在OSI第四层，这种方式利用TCP协议的特性，就是三次握手。攻击者发送TCP SYN，SYN是TCP三次握手中的第一个数据包，而当服务器返回ACK后，该攻击者就不对其进行再确认，那这个TCP连接就处于挂起状态，也就是所谓的半连接状态，服务器收不到再确认的话，还会重复发送ACK给攻击者。这样更加会浪费服务器的资源。攻击者就对服务器发送非常大量的这种TCP连接，由于每一个都没法完成三次握手，所以在服务器上，这些TCP连接会因为挂起状态而消耗CPU和内存，最后服务器可能死机，就无法为正常用户提供服务了。</p>
<p>解决方法：<strong>SYN cookie</strong></p>
<p><strong>TCO释放连接</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/TCP%E9%87%8A%E6%94%BE%E8%BF%9E%E6%8E%A5.png" alt="TCP释放连接"></p>
<ol>
<li><p>客户端发送连接释放报文段，停止发送数据，主动关闭TCP连接。</p>
<p> FIN&#x3D;1，seq&#x3D;u</p>
</li>
<li><p>服务器端回送一个确认报文段，客户到服务器这个方向的连接就释放了——半关闭状态。</p>
<p> ACK&#x3D;1，seq&#x3D;v，ack&#x3D;u+1</p>
</li>
<li><p>服务器端发完数据，就发出连接释放报文段，主动关闭TCP连接。</p>
<p> FIN&#x3D;1，ACK&#x3D;1，seq&#x3D;w，ack&#x3D;u+1</p>
</li>
<li><p>客户端回送一个确认报文段，再等到时间等待计时器设置的2MSL(最长报文段寿命)后，连接彻底关闭。</p>
<p> ACK&#x3D;1，seq&#x3D;u+1，ack&#x3D;w+1</p>
</li>
</ol>
<p> <strong>TCP可靠传输</strong></p>
<p>保证接收方进程从缓存区读出的字节流与发送发发出的字节流是完全一样的。</p>
<p>TCP实现可靠传输的机制：</p>
<ol>
<li>校验：与UDP校验一样，增加伪首部。</li>
<li>序号：一个字节占一个序号，序号字段指的是一个报文段第一个字节的序号。</li>
<li>确认：TCP接收方对已经正确接收到的报文段进行确认。</li>
<li>重传：TCP的发送方在规定的时间内没有收到确认就要重传已发送的报文段。TCP采用自适应算法，动态改变重传时间RTTs(加权平均往返时间)。</li>
</ol>
<p><strong>TCP流量控制</strong></p>
<p>流量控制：让发送方慢点，要让接收方来得及接收。</p>
<p>TCP利用滑动窗口机制实现流量控制。</p>
<p>在通信过程中，接收方根据自己接收缓存的大小，动态地调整发送方的发送窗口大小，即接收窗口rwnd（接收方设置确认报文段的窗口字段来将rwnd通知给发送方），发送方的发送窗口取接收窗口rwnd和拥塞窗口cwnd的最小值。</p>
<p><strong>发送窗口大小可以动态变化。</strong></p>
<p>A向B发送数据，连接建立时，B告诉A：“我的rwnd&#x3D;400(字节)“，设每一个报文段100B，报文段序号初始值为1。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6.png" alt="TCP流量控制"></p>
<p>TCP为每一个连接设有一个持续计时器，只要TCP连接的一方受到对方的零窗口通知，就启动持续计时器。</p>
<p>若持续计时器设置的时间到期，就发送一个零窗口探测报文段。接收方收到探测报文段时给出现在的窗口值。</p>
<p>若窗口仍然是0，那么发送方就重新设置持续计时器。</p>
<p><strong>TCP拥塞控制</strong></p>
<p>出现拥塞的条件：对资源需求的总和&gt;可用资源</p>
<p>网络中有许多资源同时呈现供应不足 -&gt; 网络性能变坏 -&gt; 网络吞吐量将随输入负荷增大而下降</p>
<p>拥塞控制：防止过多的数据注入到网络中。 </p>
<p><strong>拥塞控制四种算法</strong></p>
<p>假定：</p>
<ol>
<li><p>数据单方向传送，而另一个方向只传送确认</p>
</li>
<li><p>接收方总是有足够大的缓存空间，因而发送窗口大小取决于拥塞程度</p>
<p> 发送串口&#x3D;Min{接收窗口rwnd，拥塞窗口cwnd}</p>
<p> 接收窗口：接收方根据接受缓存设置的值，并告知给发送方，反映接收方容量。</p>
<p> 拥塞窗口：发送方根据自己估算的网络拥塞程度而设置的窗口值，反映网络当前容量。</p>
</li>
</ol>
<p>慢开始和拥塞避免</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E6%85%A2%E5%BC%80%E5%A7%8B%E5%92%8C%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D.png" alt="慢开始和拥塞避免"></p>
<p>开始时cwnd&#x3D;1的一个报文段</p>
<p>一个传输轮次：</p>
<p>发送了一批报文段并收到它们的确认的时间。一个往返时延RTT。开始发送一批拥塞窗口内的报文段到开始发送下一批拥塞窗口内的报文段的时间。</p>
<p>快重传和快恢复</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%BF%AB%E9%87%8D%E4%BC%A0%E5%92%8C%E5%BF%AB%E6%81%A2%E5%A4%8D.png" alt="快重传和快恢复"></p>
<h2 id="应用层-1"><a href="#应用层-1" class="headerlink" title="应用层"></a>应用层</h2><p><strong>应用层概述</strong></p>
<p>应用层对应用程序的通信提供服务。</p>
<p><strong>应用层协议定义</strong>：</p>
<p>应用进程交换的报文类型，请求还是响应？</p>
<p>各种报文类型的语法，如报文中的各个字段及其详细描述</p>
<p>字段的语义，即包含在字段中的信息的含义</p>
<p>进程何时、如何发送报文，以及对报文进行响应的规则</p>
<p><strong>应用层的功能</strong>：</p>
<p>文件传输、访问和管理</p>
<p>电子邮件</p>
<p>虚拟终端</p>
<p>查询服务和远程作业登录</p>
<p><strong>应用层的重要协议</strong>：</p>
<p>FTP、SMTP、POP3、HTTP、DNS</p>
<h3 id="网络应用模型"><a href="#网络应用模型" class="headerlink" title="网络应用模型"></a>网络应用模型</h3><p><strong>客户&#x2F;服务器(c&#x2F;s)模型</strong></p>
<p>服务器：提供计算服务的设备</p>
<ol>
<li>永久的提供服务</li>
<li>永久性访问地址&#x2F;域名</li>
</ol>
<p>客户机：请求计算服务的主机</p>
<ol>
<li>与服务器通信，使用服务器提供的服务</li>
<li>间歇性接入网络</li>
<li>可能使用动态IP地址</li>
<li>不与其他客户机直接通信</li>
</ol>
<p>应用：Web、文件传输FTP、远程登录、电子邮件</p>
<p><strong>P2P模型</strong></p>
<p>不存在永远在线的服务器</p>
<p>每个主机既可以提供服务，也可以请求服务</p>
<p>任意端系统&#x2F;节点之间可以直接通讯</p>
<p>节点间接性接入网络</p>
<p>节点可能改变IP地址</p>
<p>可扩展性好</p>
<p>网络健壮性强</p>
<h3 id="DNS系统"><a href="#DNS系统" class="headerlink" title="DNS系统"></a>DNS系统</h3><p><strong>域名</strong></p>
<p><a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p>com：顶级域名</p>
<p>baidu：二级域名</p>
<p>www：三级域名</p>
<ul>
<li>根：‘.’</li>
<li>顶级域名<ul>
<li>国家顶级域名：cn, us, uk</li>
<li>通用顶级域名：com, net, org, gov, int, aero, museum, travel</li>
<li>基础结构域名&#x2F;反向域名：arpa</li>
</ul>
</li>
<li>二级域名<ul>
<li>类别域名：ac, com, edu, gov, mil, net, org</li>
<li>行政区域名 用于我国各省、自治区、直辖市 bj, js</li>
</ul>
</li>
<li>三级域名</li>
<li>四级域名</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E5%9F%9F%E5%90%8D.png" alt="域名"></p>
<p><strong>域名解析过程</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2.png" alt="递归查询"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2.png" alt="迭代查询"></p>
<h3 id="文件传输协议FTP"><a href="#文件传输协议FTP" class="headerlink" title="文件传输协议FTP"></a>文件传输协议FTP</h3><p><strong>文件传送协议FTP（File Transfer Protocol）</strong></p>
<p>提供不同种类主机系统（硬、软件体系等都可以不同）之间的文件传输能力</p>
<p>FTP是基于客户&#x2F;服务器（c&#x2F;s）的协议</p>
<p>用户通过一个客户机程序连接至在远程计算机上运行的服务器程序。依照FTP协议提供服务，进行文件传送的计算机就是FTP服务器。连接FTP服务器，遵循FTP协议的服务器传送文件的电脑就是FT P客户端。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/FTP.png" alt="FTP工作原理"></p>
<p>控制连接始终保持</p>
<p>数据连接保持一会</p>
<p>是否使用TCP 20端口建立数据连接与传输模式有关</p>
<p>主动方式使用TCP 20端口</p>
<p>被动方式由服务器和客户端自行协商决定（端口&gt;1024）</p>
<p>FTP传输模式：</p>
<ul>
<li>文本模式：ASCII模式，以文本序列传输数据；</li>
<li>二进制模式：Binary模式，以二进制序列传输数据。</li>
</ul>
<p>简单文件传送协议TFTP（Trivial File Transfer Protocol）</p>
<h3 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h3><p>电子邮件的信息格式：</p>
<ul>
<li><p>信封：<a href="mailto:&#x61;&#x62;&#x63;&#46;&#64;&#x31;&#x36;&#x33;&#46;&#99;&#111;&#x6d;">&#x61;&#x62;&#x63;&#46;&#64;&#x31;&#x36;&#x33;&#46;&#99;&#111;&#x6d;</a></p>
</li>
<li><p>内容：</p>
<ul>
<li><p>首部</p>
<p>  To:<a href="mailto:&#x61;&#98;&#x63;&#46;&#64;&#49;&#54;&#51;&#46;&#99;&#x6f;&#x6d;">&#x61;&#98;&#x63;&#46;&#64;&#49;&#54;&#51;&#46;&#99;&#x6f;&#x6d;</a></p>
<p>  Subject:hello!</p>
</li>
<li><p>主题</p>
</li>
</ul>
</li>
</ul>
<p>组成结构</p>
<ul>
<li>用户代理：电子邮件客户端软件——撰写、显示、处理、通信</li>
<li>邮件服务器<ul>
<li>发送和接受邮件</li>
<li>向发件人报告邮件传送结果</li>
</ul>
</li>
<li>协议<ul>
<li>SMTP协议（发）</li>
<li>POP3、IMAP（收）</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/%E9%82%AE%E4%BB%B6%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png" alt="邮件工作原理"></p>
<p><strong>简单邮件传送协议SMTP</strong></p>
<p>SMTP规定了在两个相互通信的SMTP进程之间应如何交换信息。</p>
<p>负责发送邮件的SMTP进程就是SMTP客户，负责接收邮件的进程就是SMTP服务器</p>
<p>SMTP规定了14条命令（几个字母）和21种应答信息（三位数字代码+简单文字说明）</p>
<p>采用TCP连接，端口号25，C&#x2F;S</p>
<p>过程：</p>
<p>连接建立 -&gt; 邮件发送 -&gt; 连接释放</p>
<p>缺点：</p>
<ol>
<li>SMTP不能传送可执行文件或者其他二进制对象。</li>
<li>SMTP仅限于传送7位ASCII码，不能传送其他非英语国家的文字。</li>
<li>SMTP服务器会拒绝超过一定长度的邮件。</li>
</ol>
<p><strong>邮局协议POP3</strong></p>
<p>采用C&#x2F;S模式的TCP连接，端口号110</p>
<p>POP3工作方式：下载并保留，下载并删除</p>
<p><strong>网际报文存取协议IMAP</strong></p>
<p>IMAP协议比POP协议复杂。当用户PC上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到邮箱的首部，若用户需要打开某个邮件，该邮件才能上传到用户的计算机上。IMAP可以让用户在不同的地方使用不同的计算机随时上网阅读处理邮件，还允许只读邮件中的某一个部分（先看正文，由WIFI的时候再下载附件）。</p>
<h3 id="万维网和HTTP协议"><a href="#万维网和HTTP协议" class="headerlink" title="万维网和HTTP协议"></a>万维网和HTTP协议</h3><p>万维网www(World Wide Web) 是一个大规模的、联机式的信息储藏所&#x2F;资料空间，是无数个网络站点和网页的集合。 </p>
<p>同一资源定位符URL—————-&gt;资源(文字、视频、音频……)</p>
<p>URL一般形式：</p>
<p>​		&lt;协议&gt;:&#x2F;&#x2F;&lt;主机&gt;:&lt;端口&gt;&#x2F;&lt;路径&gt;		<a target="_blank" rel="noopener" href="http://www.pku.edu.cn/">http://www.pku.edu.cn</a></p>
<p>​			http		域名</p>
<p>​			ftp		 IP地址</p>
<p>用户通过点击超链接获取资源，这些资源通过超文本传输协议(HTTP)传送给使用者。</p>
<p>万维网以客户&#x2F;服务器方式工作，用户使用的浏览器就是万维网客户程序，万维网文档所驻留的主机运行服务器程序。</p>
<p>万维网使用超文本标记语言HTML，使得万维网页面设计者可以很方便地从一个界面的链接转到另一个界面，并能够在自己的屏幕上显示出来。</p>
<p><strong>超文本传输协议HTTP</strong></p>
<p>HTTP协议定义了浏览器怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/HTTP1.png" alt="HTTP1"></p>
<p>用户浏览页面方法：</p>
<ol>
<li>输入URL</li>
<li>点击超链接</li>
</ol>
<p>具体过程：</p>
<ol>
<li>浏览器分析URL</li>
<li>浏览器向DNS请求解析IP地址</li>
<li>DNS解析出IP地址</li>
<li>浏览器与服务器建立TCP连接</li>
<li>浏览器发出取文件命令</li>
<li>服务器响应</li>
<li>释放TCP连接</li>
<li>浏览器显示</li>
</ol>
<p><strong>HTTP协议的特点</strong></p>
<p>HTTP协议是无状态的。</p>
<p>但是在实际工作中，一些万维网站点常常希望能够识别用户。</p>
<p>COOkie时存储在用户主机中的文本文件，记录一段时间内某用户（使用识别码，如“123456”）的访问记录。</p>
<p>HTTP采用TCP作为运输层协议，但HTTP协议本身是无连接的（通信双方在交换HTTP报文之前不需要建立HTTP连接）。</p>
<p>HTTP的连接方式：</p>
<ul>
<li>持久连接keep-alive<ul>
<li>非流水</li>
<li>流水</li>
</ul>
</li>
<li>非持久连接close</li>
</ul>
<p>HTTP非持久连接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/http%E9%9D%9E%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5.png" alt="http非持久连接"></p>
<p>HTTP持久连接</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/http%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5.png" alt="http持久连接"></p>
<p><strong>报文结构</strong></p>
<p>HTTP报文是面向文本的，因此在报文中的每一个字段都是一些ASCII码串。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/../img/computer/http%E6%8A%A5%E6%96%87%E7%BB%93%E6%9E%84.png" alt="报文结构"></p>
<p>状态码：</p>
<ul>
<li><p>1xx表示通知信息的，如请求收到了或正在处理</p>
</li>
<li><p>2xx表示成功，如接受或知道了</p>
</li>
<li><p>3xx表示重定向，如要完成请求还必须采取进一步的行动</p>
</li>
<li><p>4xx表示客户的差错，如请求中有错误的语法或不能完成</p>
</li>
<li><p>5xx表示服务器的差错，如服务器失效无法完成请求</p>
</li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a></div><div class="post_share"><div class="social-share" data-image="/img/cover.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/31/operatingSystem/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">操作系统</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/25/io/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">IO 框架</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E3%80%81%E7%BB%84%E6%88%90%E3%80%81%E5%8A%9F%E8%83%BD%E5%92%8C%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.</span> <span class="toc-text">概念、组成、功能和分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">1.1.1.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">1.1.2.</span> <span class="toc-text">组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.1.3.</span> <span class="toc-text">分类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%8C%96%E5%B7%A5%E7%BB%84%E5%8F%8A%E7%9B%B8%E5%85%B3%E7%BB%84%E7%BB%87"><span class="toc-number">1.2.</span> <span class="toc-text">标准化工组及相关组织</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.1.</span> <span class="toc-text">标准的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RFC%EF%BC%88Request-For-Comments%EF%BC%89%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A0%87%E5%87%86%E7%9A%84%E5%BD%A2%E5%BC%8F"><span class="toc-number">1.2.2.</span> <span class="toc-text">RFC（Request For Comments）因特网标准的形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E7%BB%84%E7%BB%87"><span class="toc-number">1.2.3.</span> <span class="toc-text">相关组织</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9F%E7%8E%87%E7%9B%B8%E5%85%B3%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.3.</span> <span class="toc-text">速率相关的性能指标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9F%E7%8E%87"><span class="toc-number">1.3.1.</span> <span class="toc-text">速率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%AE%BD"><span class="toc-number">1.3.2.</span> <span class="toc-text">带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">吞吐量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E3%80%81%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF%E3%80%81RTT%E5%92%8C%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">1.4.</span> <span class="toc-text">时延、时延带宽积、RTT和利用率</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text">时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="toc-number">1.4.2.</span> <span class="toc-text">时延带宽积</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4RTT"><span class="toc-number">1.4.3.</span> <span class="toc-text">往返时间RTT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">1.4.4.</span> <span class="toc-text">利用率</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84%E3%80%81%E5%8D%8F%E8%AE%AE%E3%80%81%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.</span> <span class="toc-text">分层结构、协议、接口和服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99"><span class="toc-number">1.5.1.</span> <span class="toc-text">分层的基本原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93"><span class="toc-number">1.5.2.</span> <span class="toc-text">实体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.3.</span> <span class="toc-text">协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3-%E8%AE%BF%E9%97%AE%E6%9C%8D%E5%8A%A1%E7%82%B9ASP"><span class="toc-number">1.5.4.</span> <span class="toc-text">接口(访问服务点ASP)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.5.5.</span> <span class="toc-text">服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSI%E4%B8%83%E5%B1%82%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.6.</span> <span class="toc-text">OSI七层参考模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%A4%BA%E5%B1%82"><span class="toc-number">1.6.2.</span> <span class="toc-text">表示层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%B1%82"><span class="toc-number">1.6.3.</span> <span class="toc-text">会话层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.6.4.</span> <span class="toc-text">传输层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.6.5.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.6.6.</span> <span class="toc-text">数据链路层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">1.6.7.</span> <span class="toc-text">物理层</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP-x2F-IP%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E5%92%8C5%E5%B1%82%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.7.</span> <span class="toc-text">TCP&#x2F;IP参考模型和5层参考模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82-1"><span class="toc-number">2.</span> <span class="toc-text">物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E5%9F%BA%E7%A1%80"><span class="toc-number">2.1.</span> <span class="toc-text">物理层基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.1.1.</span> <span class="toc-text">数据通信基础知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A0%81%E5%85%83%E3%80%81%E6%B3%A2%E7%89%B9%E3%80%81%E9%80%9F%E7%8E%87%E3%80%81%E5%B8%A6%E5%AE%BD"><span class="toc-number">2.1.2.</span> <span class="toc-text">码元、波特、速率、带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99%E5%92%8C%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">2.1.3.</span> <span class="toc-text">奈氏准则和香农定理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">2.2.</span> <span class="toc-text">物理层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E7%BB%A7%E5%99%A8"><span class="toc-number">2.2.1.</span> <span class="toc-text">中继器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BA%BF%E5%99%A8"><span class="toc-number">2.2.2.</span> <span class="toc-text">集线器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-1"><span class="toc-number">3.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8A%9F%E8%83%BD%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">数据链路层功能概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7%E5%92%8C%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.</span> <span class="toc-text">封装成帧和透明传输</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.1.</span> <span class="toc-text">透明传输</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6%EF%BC%88%E6%A3%80%E9%94%99%E7%BC%96%E7%A0%81%E3%80%81%E7%BA%A0%E9%94%99%E7%BC%96%E7%A0%81%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">差错控制（检错编码、纠错编码）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E9%94%99%E7%BC%96%E7%A0%81%E2%80%94%E2%80%94%E5%A5%87%E5%81%B6%E6%A3%80%E9%AA%8C%E7%A0%81"><span class="toc-number">3.3.1.</span> <span class="toc-text">检错编码——奇偶检验码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E9%94%99%E7%BC%96%E7%A0%81%E2%80%94%E2%80%94CRC%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E7%A0%81"><span class="toc-number">3.3.2.</span> <span class="toc-text">检错编码——CRC循环冗余码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A0%E9%94%99%E7%BC%96%E7%A0%81%E2%80%94%E2%80%94%E6%B5%B7%E6%98%8E%E7%A0%81%EF%BC%88%E6%B1%89%E6%98%8E%E7%A0%81%EF%BC%89"><span class="toc-number">3.3.3.</span> <span class="toc-text">纠错编码——海明码（汉明码）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6"><span class="toc-number">3.4.</span> <span class="toc-text">流量控制与可靠传输机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.4.1.</span> <span class="toc-text">停止-等待协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.4.2.</span> <span class="toc-text">滑动窗口协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%8E%E9%80%80N%E5%B8%A7%E5%8D%8F%E8%AE%AE%EF%BC%88GBN%EF%BC%89"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">后退N帧协议（GBN）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE%EF%BC%88SR%EF%BC%89"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">选择重传协议（SR）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">3.5.</span> <span class="toc-text">信道划分介质访问控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">3.5.1.</span> <span class="toc-text">介质访问控制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">3.6.</span> <span class="toc-text">局域网基本概念和体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84"><span class="toc-number">3.6.1.</span> <span class="toc-text">局域网拓扑结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">3.6.2.</span> <span class="toc-text">局域网的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.3.</span> <span class="toc-text">以太网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-x2F-CD%E5%8D%8F%E8%AE%AE%EF%BC%88%E8%BD%BD%E6%B3%A2%E7%9B%91%E5%90%AC%E5%A4%9A%E7%82%B9%E6%8E%A5%E5%85%A5-x2F-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="toc-number">3.6.4.</span> <span class="toc-text">CSMA&#x2F;CD协议（载波监听多点接入&#x2F;碰撞检测）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PPP%E5%8D%8F%E8%AE%AE%E5%92%8CHDLC%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.7.</span> <span class="toc-text">PPP协议和HDLC协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82-1"><span class="toc-number">4.</span> <span class="toc-text">网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">数据交换方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="toc-number">4.2.</span> <span class="toc-text">路由算法与路由协议概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.3.</span> <span class="toc-text">IP数据报格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv4%E5%9C%B0%E5%9D%80"><span class="toc-number">4.4.</span> <span class="toc-text">IPv4地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="toc-number">4.5.</span> <span class="toc-text">网络地址转换NAT</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E5%92%8C%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">4.6.</span> <span class="toc-text">子网划分和子网掩码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80CIDR"><span class="toc-number">4.7.</span> <span class="toc-text">无分类编址CIDR</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%84%E6%88%90%E8%B6%85%E7%BD%91"><span class="toc-number">4.7.1.</span> <span class="toc-text">构成超网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.8.</span> <span class="toc-text">ARP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DHCP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.9.</span> <span class="toc-text">DHCP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.10.</span> <span class="toc-text">ICMP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv6"><span class="toc-number">4.11.</span> <span class="toc-text">IPv6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RIP%E5%8D%8F%E8%AE%AE%E4%B8%8E%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E7%AE%97%E6%B3%95"><span class="toc-number">4.12.</span> <span class="toc-text">RIP协议与距离向量算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSPF%E5%8D%8F%E8%AE%AE%E4%B8%8E%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E7%AE%97%E6%B3%95"><span class="toc-number">4.13.</span> <span class="toc-text">OSPF协议与链路状态算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BGP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.14.</span> <span class="toc-text">BGP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E7%BB%84%E6%92%AD"><span class="toc-number">4.15.</span> <span class="toc-text">IP组播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8IP"><span class="toc-number">4.16.</span> <span class="toc-text">移动IP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82-1"><span class="toc-number">5.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">传输层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E5%8D%8F%E8%AE%AE%EF%BC%88%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">5.2.</span> <span class="toc-text">UDP协议（用户数据报协议）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.3.</span> <span class="toc-text">TCP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82-1"><span class="toc-number">6.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">6.1.</span> <span class="toc-text">网络应用模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DNS%E7%B3%BB%E7%BB%9F"><span class="toc-number">6.2.</span> <span class="toc-text">DNS系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEFTP"><span class="toc-number">6.3.</span> <span class="toc-text">文件传输协议FTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">6.4.</span> <span class="toc-text">电子邮件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91%E5%92%8CHTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.5.</span> <span class="toc-text">万维网和HTTP协议</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By Zhang Jian</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="/js/light.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'd8ef7a65db7c4006a56ac333e3160913';
  var gaud_map_key = 'b08b224a212eea586a32bbcc5605bbe4';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 570px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 480px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(/img/cover1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Spring/&quot;);" href="javascript:void(0);">Spring</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">Spring 全家桶</span></li><li class="categoryBar-list-item" style="background:url(/img/cover2.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Linux/&quot;);" href="javascript:void(0);">Linux</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">Linux 操作系统</span></li><li class="categoryBar-list-item" style="background:url(/img/cover3.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/计算机网络/&quot;);" href="javascript:void(0);">计算机网络</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">计算机网络知识体系</span></li><li class="categoryBar-list-item" style="background:url(/img/cover4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/其他/&quot;);" href="javascript:void(0);">其他</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">其他文档集合</span></li><li class="categoryBar-list-item" style="background:url(/img/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Java/&quot;);" href="javascript:void(0);">Java</a><span class="categoryBar-list-count">4</span><span class="categoryBar-list-descr">Java 知识</span></li><li class="categoryBar-list-item" style="background:url(/img/cover4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/中间件/&quot;);" href="javascript:void(0);">中间件</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">数据结构与算法</span></li><li class="categoryBar-list-item" style="background:url(/img/cover5.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/数据结构与算法/&quot;);" href="javascript:void(0);">数据结构与算法</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">海量中间件</span></li><li class="categoryBar-list-item" style="background:url(/img/cover6.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/数据库/&quot;);" href="javascript:void(0);">数据库</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">关系型数据库和非关系型数据库</span></li><li class="categoryBar-list-item" style="background:url(/img/cover5.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/操作系统/&quot;);" href="javascript:void(0);">操作系统</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">操作系统知识</span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/12/12/Spring/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../img/spring/spring.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-12-12</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/12/12/Spring/&quot;);" href="javascript:void(0);" alt="">Spring</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/12/12/Spring/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/11/28/kafka/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="../img/kafka/封面.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-28</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/11/28/kafka/&quot;);" href="javascript:void(0);" alt="">Kafka</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/11/28/kafka/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.fomal.cc/api?zhangjianGorilla",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'zhangjianGorilla')
    }
  </script><!-- hexo injector body_end end --></body></html>